<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# f3

```go
import "command-line-arguments"
```

## Index

- [Constants](<#constants>)
- [Variables](<#variables>)
- [type Account](<#type-account>)
  - [func NewAccount(organizationId *string, country string, bankId string, bankIdCode string, accountHolder string, accountNumber string, accountCurrency string, customerId string) *Account](<#func-newaccount>)
- [type AccountAttr](<#type-accountattr>)
  - [func (aa *AccountAttr) WithStatusClosed(reason string) *AccountAttr](<#func-accountattr-withstatusclosed>)
  - [func (aa *AccountAttr) WithStatusConfirmed() *AccountAttr](<#func-accountattr-withstatusconfirmed>)
  - [func (aa *AccountAttr) WithStatusFailed() *AccountAttr](<#func-accountattr-withstatusfailed>)
  - [func (aa *AccountAttr) WithStatusPending() *AccountAttr](<#func-accountattr-withstatuspending>)
- [type AccountEnvelope](<#type-accountenvelope>)
- [type AccountStatusString](<#type-accountstatusstring>)
- [type AccountsEnvelope](<#type-accountsenvelope>)
- [type Client](<#type-client>)
  - [func NewClient() *Client](<#func-newclient>)
  - [func (c *Client) CreateAccount(account *Account) (*Account, Err)](<#func-client-createaccount>)
  - [func (c *Client) DeleteAccount(accountId string, version uint64) Err](<#func-client-deleteaccount>)
  - [func (c *Client) FetchAccount(accountId string) (*Account, Err)](<#func-client-fetchaccount>)
  - [func (c *Client) HttpClient() http.Client](<#func-client-httpclient>)
  - [func (c *Client) IsHealthy() bool](<#func-client-ishealthy>)
  - [func (c *Client) WithEndPoint(endpoint string) *Client](<#func-client-withendpoint>)
- [type Err](<#type-err>)
- [type ErrorResponse](<#type-errorresponse>)
- [type HealthyResponse](<#type-healthyresponse>)
- [type Resource](<#type-resource>)


## Constants

```go
const (
    // ErrGeneric signals a generic error.
    ErrGeneric int = iota

    // ErrJsonStringify signals that serialization to JSON failed.
    ErrJsonStringify int = iota

    // ErrJsonParse signals that the JSON parsing failed.
    ErrJsonParse int = iota

    // ErrRequest signals that the request failed.
    ErrRequest int = iota

    // ErrResponse signals that the response is erroneous.
    ErrResponse int = iota
)
```

```go
const (
    // StatusPending represents a pending (not yet confirmed) account.
    StatusPending = AccountStatusString("pending")

    // StatusConfirmed represents a confirmed account.
    StatusConfirmed = AccountStatusString("confirmed")

    // StatusClosed is an FPS only account status string and requires AccountAttr.StatusReason to be set.
    StatusClosed = AccountStatusString("closed")

    // StatusFailed is an SEPA and FPS Indirect (LHV) only account status string.
    StatusFailed = AccountStatusString("failed")

    // TypeAccount is the type for accounts.
    TypeAccount = "accounts"
)
```

Version hold the version of the client\.

```go
const Version = "0.0.1"
```

## Variables

```go
var (
    // DefaultEndPoint is the default endpoint to connect the client to.
    DefaultEndPoint = flag.String("f3.endpoint", "https://api.f3.tech/v1", "Set the default endpoint")

    // DefaultTimeout is the default timeout to be used for the http client.
    DefaultTimeout = time.Second * 5

    // DefaultOrganizationId is the default organization identifier to be used, when a new account is created. The variable
    // is initialized from the environment variable F3_CLIENT_ORG_ID
    DefaultOrganizationId string

    // DefaultIntegrationOrganizationId is the default organization identifier used for integration tests.
    DefaultIntegrationOrganizationId = "f8e803fe-6962-4811-94dc-e558610cbe78"

    // IntegrationTestAccountId is the id to be used for the integration test account, which is created and deleted.
    // Can be overridden using the environment variable F3_TEST_ACCOUNT_ID
    IntegrationTestAccountId = "f8e803fe-6962-4811-94dc-000000000000"

    // DefaultDialer is the default dialer that is being used when new Form 3 clients are created.
    DefaultDialer = &net.Dialer{}

    // DefaultTransport is the default transport configuration to be used when new Form 3 clients are created.
    DefaultTransport = &http.Transport{
        DialContext:     DefaultDialer.DialContext,
        MaxIdleConns:    10,
        IdleConnTimeout: 30 * time.Second,
    }
)
```

## type [Account](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/model-account.go#L38-L42>)

Account represents the account resource with attributes\.

```go
type Account struct {
    Resource
    // Attr are the attributes of the account.
    Attr *AccountAttr `json:"attributes,omitempty"`
}
```

### func [NewAccount](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/model-account.go#L96-L105>)

```go
func NewAccount(organizationId *string, country string, bankId string, bankIdCode string, accountHolder string, accountNumber string, accountCurrency string, customerId string) *Account
```

NewAccount is a small helper method to create a basic structure for a new account\. The created structure can be modified after creation or directly used to create a new account\. If the organization\-id is nil\, then the DefaultOrganizationId is used\. The customerId is optional and if given\, it is set\.

## type [AccountAttr](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/model-account.go#L45-L63>)

AccountAttr are the account specific attributes\.

```go
type AccountAttr struct {
    AlternativeNames        []string            `json:"alternative_names,omitempty"`
    Name                    []string            `json:"name,omitempty"`
    AccountClassification   string              `json:"account_classification,omitempty"`
    AccountNumber           string              `json:"account_number,omitempty"` // A unique account number will automatically be generated if not provided. If provided, the account number is not validated.
    BankId                  string              `json:"bank_id,omitempty"`
    BankIdCode              string              `json:"bank_id_code,omitempty"`
    BaseCurrency            string              `json:"base_currency,omitempty"`
    CustomerId              *string             `json:"customer_id,omitempty"`
    Bic                     string              `json:"bic,omitempty"`
    Country                 string              `json:"country,omitempty"`
    Iban                    string              `json:"iban,omitempty"` // Will be calculated from other fields if not supplied.
    SecondaryIdentification string              `json:"secondary_identification,omitempty"`
    Status                  AccountStatusString `json:"status,omitempty"`
    StatusReason            *string             `json:"status_reason,omitempty"`
    Switched                bool                `json:"switched,omitempty"`
    AccountMatchingOptOut   bool                `json:"account_matching_opt_out,omitempty"`
    JointAccount            bool                `json:"joint_account,omitempty"`
}
```

### func \(\*AccountAttr\) [WithStatusClosed](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/model-account.go#L80>)

```go
func (aa *AccountAttr) WithStatusClosed(reason string) *AccountAttr
```

WithStatusClosed set the status to StatusClosed\, requires reason\.

### func \(\*AccountAttr\) [WithStatusConfirmed](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/model-account.go#L73>)

```go
func (aa *AccountAttr) WithStatusConfirmed() *AccountAttr
```

WithStatusConfirmed set the status to StatusConfirmed\.

### func \(\*AccountAttr\) [WithStatusFailed](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/model-account.go#L87>)

```go
func (aa *AccountAttr) WithStatusFailed() *AccountAttr
```

WithStatusFailed set the status to StatusFailed\.

### func \(\*AccountAttr\) [WithStatusPending](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/model-account.go#L66>)

```go
func (aa *AccountAttr) WithStatusPending() *AccountAttr
```

WithStatusPending set the status to StatusPending\.

## type [AccountEnvelope](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/model-account.go#L33-L35>)

AccountEnvelope is an envelope for a single account\.

```go
type AccountEnvelope struct {
    Data *Account `json:"data"`
}
```

## type [AccountStatusString](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/model-account.go#L8>)

AccountStatusString is an alias for a string that represents the account status\.

```go
type AccountStatusString string
```

## type [AccountsEnvelope](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/model-account.go#L28-L30>)

AccountsEnvelope is an envelope for a list of accounts\.

```go
type AccountsEnvelope struct {
    Data []*Account `json:"data"`
}
```

## type [Client](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/client.go#L31-L36>)

Client is an abstraction above a http\.Client bound to a specific Form3 endpoint\.

```go
type Client struct {
    // contains filtered or unexported fields
}
```

### func [NewClient](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/client.go#L23>)

```go
func NewClient() *Client
```

NewClient creates a new Form3 client bound to the production endpoint and setup with defaults\.

### func \(\*Client\) [CreateAccount](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/client.go#L130>)

```go
func (c *Client) CreateAccount(account *Account) (*Account, Err)
```

CreateAccount creates the given account and returns the server response or an error\, when the account creation failed\.

### func \(\*Client\) [DeleteAccount](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/client.go#L174>)

```go
func (c *Client) DeleteAccount(accountId string, version uint64) Err
```

### func \(\*Client\) [FetchAccount](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/client.go#L153>)

```go
func (c *Client) FetchAccount(accountId string) (*Account, Err)
```

### func \(\*Client\) [HttpClient](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/client.go#L48>)

```go
func (c *Client) HttpClient() http.Client
```

HttpClient returns the underlying http client being used\. If the default created by NewClient is not sufficient\, modify this before using\.

### func \(\*Client\) [IsHealthy](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/client.go#L53>)

```go
func (c *Client) IsHealthy() bool
```

IsHealthy tests if the service is alive and responsive within the set request timeout\.

### func \(\*Client\) [WithEndPoint](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/client.go#L39>)

```go
func (c *Client) WithEndPoint(endpoint string) *Client
```

WithEndPoint rebinds the endpoint of the client\.

## type [Err](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/errors.go#L9-L20>)

Err is an interface to return errors\, which is compatible to the standard error interface\.

```go
type Err interface {
    // Unwrap returns the cause.
    Unwrap() error
    // Error returns the human-readable err message.
    Error() string
    // ErrorCode returns the machine-readable error code.
    ErrorCode() int
    // Request returns the HTTP request that is the reason for this error; if any.
    Request() *http.Request
    // Response returns the HTTP response that is the reason for this error; if any.
    Response() *http.Response
}
```

## type [ErrorResponse](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/response-error.go#L4-L6>)

ErrorResponse is the response the account API sends back\, when an error encountered\.

```go
type ErrorResponse struct {
    ErrorMessage string `json:"error_message"`
}
```

## type [HealthyResponse](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/response-healthy.go#L4-L7>)

HealthyResponse is returned by the health\-check request\.

```go
type HealthyResponse struct {
    // Status is the status returned by the service.
    Status *string `json:"status,omitempty"`
}
```

## type [Resource](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/model-resource.go#L6-L27>)

Resource is an abstract base structure with the shared attributes of all resources\.

```go
type Resource struct {
    // Id is the unique identifier of the resource; must be a UUID.
    Id  string `json:"id,omitempty"`

    // OrganisationId is the unique identifier of the organization that own the record; must be a UUID.
    OrganisationId string `json:"organisation_id,omitempty"`

    // Type is the type of the record and set by the account API.
    Type string `json:"type,omitempty"`

    // Version is a counter indicating how many times this resource has been modified. When you create a resource, it
    // is automatically set to 0. Whenever the content of the resource changes, the value of version is increased.
    // Used for concurrency control in Patch and Delete methods to avoid modifying an older version of the record that
    // has already been changed (err.g. by an internal process at Form3).
    Version *uint64 `json:"version,omitempty"` // Note: It needs to be a pointer, because we need to differ between missing and 0

    // CreatedOn is the time when the record was created, set server side.
    CreatedOn *time.Time `json:"created_on,omitempty"`

    // ModifiedOn is the time when the record was last modified, set server side.
    ModifiedOn *time.Time `json:"modified_on,omitempty"`
}
```

# f3

```go
import "command-line-arguments"
```

## Index

- [Constants](<#constants>)
- [Variables](<#variables>)
- [type Account](<#type-account>)
  - [func NewAccount(organizationId *string, country string, bankId string, bankIdCode string, accountHolder string, accountNumber string, accountCurrency string, customerId string) *Account](<#func-newaccount>)
- [type AccountAttr](<#type-accountattr>)
  - [func (aa *AccountAttr) WithStatusClosed(reason string) *AccountAttr](<#func-accountattr-withstatusclosed>)
  - [func (aa *AccountAttr) WithStatusConfirmed() *AccountAttr](<#func-accountattr-withstatusconfirmed>)
  - [func (aa *AccountAttr) WithStatusFailed() *AccountAttr](<#func-accountattr-withstatusfailed>)
  - [func (aa *AccountAttr) WithStatusPending() *AccountAttr](<#func-accountattr-withstatuspending>)
- [type AccountEnvelope](<#type-accountenvelope>)
- [type AccountStatusString](<#type-accountstatusstring>)
- [type AccountsEnvelope](<#type-accountsenvelope>)
- [type Client](<#type-client>)
  - [func NewClient() *Client](<#func-newclient>)
  - [func (c *Client) CreateAccount(account *Account) (*Account, Err)](<#func-client-createaccount>)
  - [func (c *Client) DeleteAccount(accountId string, version uint64) Err](<#func-client-deleteaccount>)
  - [func (c *Client) FetchAccount(accountId string) (*Account, Err)](<#func-client-fetchaccount>)
  - [func (c *Client) HttpClient() http.Client](<#func-client-httpclient>)
  - [func (c *Client) IsHealthy() bool](<#func-client-ishealthy>)
  - [func (c *Client) WithEndPoint(endpoint string) *Client](<#func-client-withendpoint>)
- [type Err](<#type-err>)
- [type ErrorResponse](<#type-errorresponse>)
- [type HealthyResponse](<#type-healthyresponse>)
- [type Resource](<#type-resource>)


## Constants

```go
const (
    // ErrGeneric signals a generic error.
    ErrGeneric int = iota

    // ErrJsonStringify signals that serialization to JSON failed.
    ErrJsonStringify int = iota

    // ErrJsonParse signals that the JSON parsing failed.
    ErrJsonParse int = iota

    // ErrRequest signals that the request failed.
    ErrRequest int = iota

    // ErrResponse signals that the response is erroneous.
    ErrResponse int = iota
)
```

```go
const (
    // StatusPending represents a pending (not yet confirmed) account.
    StatusPending = AccountStatusString("pending")

    // StatusConfirmed represents a confirmed account.
    StatusConfirmed = AccountStatusString("confirmed")

    // StatusClosed is an FPS only account status string and requires AccountAttr.StatusReason to be set.
    StatusClosed = AccountStatusString("closed")

    // StatusFailed is an SEPA and FPS Indirect (LHV) only account status string.
    StatusFailed = AccountStatusString("failed")

    // TypeAccount is the type for accounts.
    TypeAccount = "accounts"
)
```

Version hold the version of the client\.

```go
const Version = "0.0.1"
```

## Variables

```go
var (
    // DefaultEndPoint is the default endpoint to connect the client to.
    DefaultEndPoint = flag.String("f3.endpoint", "https://api.f3.tech/v1", "Set the default endpoint")

    // DefaultTimeout is the default timeout to be used for the http client.
    DefaultTimeout = time.Second * 5

    // DefaultOrganizationId is the default organization identifier to be used, when a new account is created. The variable
    // is initialized from the environment variable F3_CLIENT_ORG_ID
    DefaultOrganizationId string

    // DefaultIntegrationOrganizationId is the default organization identifier used for integration tests.
    DefaultIntegrationOrganizationId = "f8e803fe-6962-4811-94dc-e558610cbe78"

    // IntegrationTestAccountId is the id to be used for the integration test account, which is created and deleted.
    // Can be overridden using the environment variable F3_TEST_ACCOUNT_ID
    IntegrationTestAccountId = "f8e803fe-6962-4811-94dc-000000000000"

    // DefaultDialer is the default dialer that is being used when new Form 3 clients are created.
    DefaultDialer = &net.Dialer{}

    // DefaultTransport is the default transport configuration to be used when new Form 3 clients are created.
    DefaultTransport = &http.Transport{
        DialContext:     DefaultDialer.DialContext,
        MaxIdleConns:    10,
        IdleConnTimeout: 30 * time.Second,
    }
)
```

## type [Account](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/model-account.go#L38-L42>)

Account represents the account resource with attributes\.

```go
type Account struct {
    Resource
    // Attr are the attributes of the account.
    Attr *AccountAttr `json:"attributes,omitempty"`
}
```

### func [NewAccount](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/model-account.go#L96-L105>)

```go
func NewAccount(organizationId *string, country string, bankId string, bankIdCode string, accountHolder string, accountNumber string, accountCurrency string, customerId string) *Account
```

NewAccount is a small helper method to create a basic structure for a new account\. The created structure can be modified after creation or directly used to create a new account\. If the organization\-id is nil\, then the DefaultOrganizationId is used\. The customerId is optional and if given\, it is set\.

## type [AccountAttr](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/model-account.go#L45-L63>)

AccountAttr are the account specific attributes\.

```go
type AccountAttr struct {
    AlternativeNames        []string            `json:"alternative_names,omitempty"`
    Name                    []string            `json:"name,omitempty"`
    AccountClassification   string              `json:"account_classification,omitempty"`
    AccountNumber           string              `json:"account_number,omitempty"` // A unique account number will automatically be generated if not provided. If provided, the account number is not validated.
    BankId                  string              `json:"bank_id,omitempty"`
    BankIdCode              string              `json:"bank_id_code,omitempty"`
    BaseCurrency            string              `json:"base_currency,omitempty"`
    CustomerId              *string             `json:"customer_id,omitempty"`
    Bic                     string              `json:"bic,omitempty"`
    Country                 string              `json:"country,omitempty"`
    Iban                    string              `json:"iban,omitempty"` // Will be calculated from other fields if not supplied.
    SecondaryIdentification string              `json:"secondary_identification,omitempty"`
    Status                  AccountStatusString `json:"status,omitempty"`
    StatusReason            *string             `json:"status_reason,omitempty"`
    Switched                bool                `json:"switched,omitempty"`
    AccountMatchingOptOut   bool                `json:"account_matching_opt_out,omitempty"`
    JointAccount            bool                `json:"joint_account,omitempty"`
}
```

### func \(\*AccountAttr\) [WithStatusClosed](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/model-account.go#L80>)

```go
func (aa *AccountAttr) WithStatusClosed(reason string) *AccountAttr
```

WithStatusClosed set the status to StatusClosed\, requires reason\.

### func \(\*AccountAttr\) [WithStatusConfirmed](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/model-account.go#L73>)

```go
func (aa *AccountAttr) WithStatusConfirmed() *AccountAttr
```

WithStatusConfirmed set the status to StatusConfirmed\.

### func \(\*AccountAttr\) [WithStatusFailed](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/model-account.go#L87>)

```go
func (aa *AccountAttr) WithStatusFailed() *AccountAttr
```

WithStatusFailed set the status to StatusFailed\.

### func \(\*AccountAttr\) [WithStatusPending](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/model-account.go#L66>)

```go
func (aa *AccountAttr) WithStatusPending() *AccountAttr
```

WithStatusPending set the status to StatusPending\.

## type [AccountEnvelope](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/model-account.go#L33-L35>)

AccountEnvelope is an envelope for a single account\.

```go
type AccountEnvelope struct {
    Data *Account `json:"data"`
}
```

## type [AccountStatusString](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/model-account.go#L8>)

AccountStatusString is an alias for a string that represents the account status\.

```go
type AccountStatusString string
```

## type [AccountsEnvelope](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/model-account.go#L28-L30>)

AccountsEnvelope is an envelope for a list of accounts\.

```go
type AccountsEnvelope struct {
    Data []*Account `json:"data"`
}
```

## type [Client](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/client.go#L31-L36>)

Client is an abstraction above a http\.Client bound to a specific Form3 endpoint\.

```go
type Client struct {
    // contains filtered or unexported fields
}
```

### func [NewClient](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/client.go#L23>)

```go
func NewClient() *Client
```

NewClient creates a new Form3 client bound to the production endpoint and setup with defaults\.

### func \(\*Client\) [CreateAccount](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/client.go#L130>)

```go
func (c *Client) CreateAccount(account *Account) (*Account, Err)
```

CreateAccount creates the given account and returns the server response or an error\, when the account creation failed\.

### func \(\*Client\) [DeleteAccount](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/client.go#L174>)

```go
func (c *Client) DeleteAccount(accountId string, version uint64) Err
```

### func \(\*Client\) [FetchAccount](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/client.go#L153>)

```go
func (c *Client) FetchAccount(accountId string) (*Account, Err)
```

### func \(\*Client\) [HttpClient](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/client.go#L48>)

```go
func (c *Client) HttpClient() http.Client
```

HttpClient returns the underlying http client being used\. If the default created by NewClient is not sufficient\, modify this before using\.

### func \(\*Client\) [IsHealthy](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/client.go#L53>)

```go
func (c *Client) IsHealthy() bool
```

IsHealthy tests if the service is alive and responsive within the set request timeout\.

### func \(\*Client\) [WithEndPoint](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/client.go#L39>)

```go
func (c *Client) WithEndPoint(endpoint string) *Client
```

WithEndPoint rebinds the endpoint of the client\.

## type [Err](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/errors.go#L9-L20>)

Err is an interface to return errors\, which is compatible to the standard error interface\.

```go
type Err interface {
    // Unwrap returns the cause.
    Unwrap() error
    // Error returns the human-readable err message.
    Error() string
    // ErrorCode returns the machine-readable error code.
    ErrorCode() int
    // Request returns the HTTP request that is the reason for this error; if any.
    Request() *http.Request
    // Response returns the HTTP response that is the reason for this error; if any.
    Response() *http.Response
}
```

## type [ErrorResponse](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/response-error.go#L4-L6>)

ErrorResponse is the response the account API sends back\, when an error encountered\.

```go
type ErrorResponse struct {
    ErrorMessage string `json:"error_message"`
}
```

## type [HealthyResponse](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/response-healthy.go#L4-L7>)

HealthyResponse is returned by the health\-check request\.

```go
type HealthyResponse struct {
    // Status is the status returned by the service.
    Status *string `json:"status,omitempty"`
}
```

## type [Resource](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/model-resource.go#L6-L27>)

Resource is an abstract base structure with the shared attributes of all resources\.

```go
type Resource struct {
    // Id is the unique identifier of the resource; must be a UUID.
    Id  string `json:"id,omitempty"`

    // OrganisationId is the unique identifier of the organization that own the record; must be a UUID.
    OrganisationId string `json:"organisation_id,omitempty"`

    // Type is the type of the record and set by the account API.
    Type string `json:"type,omitempty"`

    // Version is a counter indicating how many times this resource has been modified. When you create a resource, it
    // is automatically set to 0. Whenever the content of the resource changes, the value of version is increased.
    // Used for concurrency control in Patch and Delete methods to avoid modifying an older version of the record that
    // has already been changed (err.g. by an internal process at Form3).
    Version *uint64 `json:"version,omitempty"` // Note: It needs to be a pointer, because we need to differ between missing and 0

    // CreatedOn is the time when the record was created, set server side.
    CreatedOn *time.Time `json:"created_on,omitempty"`

    // ModifiedOn is the time when the record was last modified, set server side.
    ModifiedOn *time.Time `json:"modified_on,omitempty"`
}
```

# f3

```go
import "command-line-arguments"
```

## Index

- [Constants](<#constants>)
- [Variables](<#variables>)
- [type Account](<#type-account>)
  - [func NewAccount(organizationId *string, country string, bankId string, bankIdCode string, accountHolder string, accountNumber string, accountCurrency string, customerId string) *Account](<#func-newaccount>)
- [type AccountAttr](<#type-accountattr>)
  - [func (aa *AccountAttr) WithStatusClosed(reason string) *AccountAttr](<#func-accountattr-withstatusclosed>)
  - [func (aa *AccountAttr) WithStatusConfirmed() *AccountAttr](<#func-accountattr-withstatusconfirmed>)
  - [func (aa *AccountAttr) WithStatusFailed() *AccountAttr](<#func-accountattr-withstatusfailed>)
  - [func (aa *AccountAttr) WithStatusPending() *AccountAttr](<#func-accountattr-withstatuspending>)
- [type AccountEnvelope](<#type-accountenvelope>)
- [type AccountStatusString](<#type-accountstatusstring>)
- [type AccountsEnvelope](<#type-accountsenvelope>)
- [type Client](<#type-client>)
  - [func NewClient() *Client](<#func-newclient>)
  - [func (c *Client) CreateAccount(account *Account) (*Account, Err)](<#func-client-createaccount>)
  - [func (c *Client) DeleteAccount(accountId string, version uint64) Err](<#func-client-deleteaccount>)
  - [func (c *Client) FetchAccount(accountId string) (*Account, Err)](<#func-client-fetchaccount>)
  - [func (c *Client) HttpClient() http.Client](<#func-client-httpclient>)
  - [func (c *Client) IsHealthy() bool](<#func-client-ishealthy>)
  - [func (c *Client) WithEndPoint(endpoint string) *Client](<#func-client-withendpoint>)
- [type Err](<#type-err>)
- [type ErrorResponse](<#type-errorresponse>)
- [type HealthyResponse](<#type-healthyresponse>)
- [type Resource](<#type-resource>)


## Constants

```go
const (
    // ErrGeneric signals a generic error.
    ErrGeneric int = iota

    // ErrJsonStringify signals that serialization to JSON failed.
    ErrJsonStringify int = iota

    // ErrJsonParse signals that the JSON parsing failed.
    ErrJsonParse int = iota

    // ErrRequest signals that the request failed.
    ErrRequest int = iota

    // ErrResponse signals that the response is erroneous.
    ErrResponse int = iota
)
```

```go
const (
    // StatusPending represents a pending (not yet confirmed) account.
    StatusPending = AccountStatusString("pending")

    // StatusConfirmed represents a confirmed account.
    StatusConfirmed = AccountStatusString("confirmed")

    // StatusClosed is an FPS only account status string and requires AccountAttr.StatusReason to be set.
    StatusClosed = AccountStatusString("closed")

    // StatusFailed is an SEPA and FPS Indirect (LHV) only account status string.
    StatusFailed = AccountStatusString("failed")

    // TypeAccount is the type for accounts.
    TypeAccount = "accounts"
)
```

Version hold the version of the client\.

```go
const Version = "0.0.1"
```

## Variables

```go
var (
    // DefaultEndPoint is the default endpoint to connect the client to.
    DefaultEndPoint = flag.String("f3.endpoint", "https://api.f3.tech/v1", "Set the default endpoint")

    // DefaultTimeout is the default timeout to be used for the http client.
    DefaultTimeout = time.Second * 5

    // DefaultOrganizationId is the default organization identifier to be used, when a new account is created. The variable
    // is initialized from the environment variable F3_CLIENT_ORG_ID
    DefaultOrganizationId string

    // DefaultIntegrationOrganizationId is the default organization identifier used for integration tests.
    DefaultIntegrationOrganizationId = "f8e803fe-6962-4811-94dc-e558610cbe78"

    // IntegrationTestAccountId is the id to be used for the integration test account, which is created and deleted.
    // Can be overridden using the environment variable F3_TEST_ACCOUNT_ID
    IntegrationTestAccountId = "f8e803fe-6962-4811-94dc-000000000000"

    // DefaultDialer is the default dialer that is being used when new Form 3 clients are created.
    DefaultDialer = &net.Dialer{}

    // DefaultTransport is the default transport configuration to be used when new Form 3 clients are created.
    DefaultTransport = &http.Transport{
        DialContext:     DefaultDialer.DialContext,
        MaxIdleConns:    10,
        IdleConnTimeout: 30 * time.Second,
    }
)
```

## type [Account](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/model-account.go#L38-L42>)

Account represents the account resource with attributes\.

```go
type Account struct {
    Resource
    // Attr are the attributes of the account.
    Attr *AccountAttr `json:"attributes,omitempty"`
}
```

### func [NewAccount](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/model-account.go#L96-L105>)

```go
func NewAccount(organizationId *string, country string, bankId string, bankIdCode string, accountHolder string, accountNumber string, accountCurrency string, customerId string) *Account
```

NewAccount is a small helper method to create a basic structure for a new account\. The created structure can be modified after creation or directly used to create a new account\. If the organization\-id is nil\, then the DefaultOrganizationId is used\. The customerId is optional and if given\, it is set\.

## type [AccountAttr](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/model-account.go#L45-L63>)

AccountAttr are the account specific attributes\.

```go
type AccountAttr struct {
    AlternativeNames        []string            `json:"alternative_names,omitempty"`
    Name                    []string            `json:"name,omitempty"`
    AccountClassification   string              `json:"account_classification,omitempty"`
    AccountNumber           string              `json:"account_number,omitempty"` // A unique account number will automatically be generated if not provided. If provided, the account number is not validated.
    BankId                  string              `json:"bank_id,omitempty"`
    BankIdCode              string              `json:"bank_id_code,omitempty"`
    BaseCurrency            string              `json:"base_currency,omitempty"`
    CustomerId              *string             `json:"customer_id,omitempty"`
    Bic                     string              `json:"bic,omitempty"`
    Country                 string              `json:"country,omitempty"`
    Iban                    string              `json:"iban,omitempty"` // Will be calculated from other fields if not supplied.
    SecondaryIdentification string              `json:"secondary_identification,omitempty"`
    Status                  AccountStatusString `json:"status,omitempty"`
    StatusReason            *string             `json:"status_reason,omitempty"`
    Switched                bool                `json:"switched,omitempty"`
    AccountMatchingOptOut   bool                `json:"account_matching_opt_out,omitempty"`
    JointAccount            bool                `json:"joint_account,omitempty"`
}
```

### func \(\*AccountAttr\) [WithStatusClosed](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/model-account.go#L80>)

```go
func (aa *AccountAttr) WithStatusClosed(reason string) *AccountAttr
```

WithStatusClosed set the status to StatusClosed\, requires reason\.

### func \(\*AccountAttr\) [WithStatusConfirmed](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/model-account.go#L73>)

```go
func (aa *AccountAttr) WithStatusConfirmed() *AccountAttr
```

WithStatusConfirmed set the status to StatusConfirmed\.

### func \(\*AccountAttr\) [WithStatusFailed](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/model-account.go#L87>)

```go
func (aa *AccountAttr) WithStatusFailed() *AccountAttr
```

WithStatusFailed set the status to StatusFailed\.

### func \(\*AccountAttr\) [WithStatusPending](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/model-account.go#L66>)

```go
func (aa *AccountAttr) WithStatusPending() *AccountAttr
```

WithStatusPending set the status to StatusPending\.

## type [AccountEnvelope](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/model-account.go#L33-L35>)

AccountEnvelope is an envelope for a single account\.

```go
type AccountEnvelope struct {
    Data *Account `json:"data"`
}
```

## type [AccountStatusString](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/model-account.go#L8>)

AccountStatusString is an alias for a string that represents the account status\.

```go
type AccountStatusString string
```

## type [AccountsEnvelope](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/model-account.go#L28-L30>)

AccountsEnvelope is an envelope for a list of accounts\.

```go
type AccountsEnvelope struct {
    Data []*Account `json:"data"`
}
```

## type [Client](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/client.go#L31-L36>)

Client is an abstraction above a http\.Client bound to a specific Form3 endpoint\.

```go
type Client struct {
    // contains filtered or unexported fields
}
```

### func [NewClient](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/client.go#L23>)

```go
func NewClient() *Client
```

NewClient creates a new Form3 client bound to the production endpoint and setup with defaults\.

### func \(\*Client\) [CreateAccount](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/client.go#L130>)

```go
func (c *Client) CreateAccount(account *Account) (*Account, Err)
```

CreateAccount creates the given account and returns the server response or an error\, when the account creation failed\.

### func \(\*Client\) [DeleteAccount](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/client.go#L174>)

```go
func (c *Client) DeleteAccount(accountId string, version uint64) Err
```

### func \(\*Client\) [FetchAccount](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/client.go#L153>)

```go
func (c *Client) FetchAccount(accountId string) (*Account, Err)
```

### func \(\*Client\) [HttpClient](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/client.go#L48>)

```go
func (c *Client) HttpClient() http.Client
```

HttpClient returns the underlying http client being used\. If the default created by NewClient is not sufficient\, modify this before using\.

### func \(\*Client\) [IsHealthy](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/client.go#L53>)

```go
func (c *Client) IsHealthy() bool
```

IsHealthy tests if the service is alive and responsive within the set request timeout\.

### func \(\*Client\) [WithEndPoint](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/client.go#L39>)

```go
func (c *Client) WithEndPoint(endpoint string) *Client
```

WithEndPoint rebinds the endpoint of the client\.

## type [Err](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/errors.go#L9-L20>)

Err is an interface to return errors\, which is compatible to the standard error interface\.

```go
type Err interface {
    // Unwrap returns the cause.
    Unwrap() error
    // Error returns the human-readable err message.
    Error() string
    // ErrorCode returns the machine-readable error code.
    ErrorCode() int
    // Request returns the HTTP request that is the reason for this error; if any.
    Request() *http.Request
    // Response returns the HTTP response that is the reason for this error; if any.
    Response() *http.Response
}
```

## type [ErrorResponse](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/response-error.go#L4-L6>)

ErrorResponse is the response the account API sends back\, when an error encountered\.

```go
type ErrorResponse struct {
    ErrorMessage string `json:"error_message"`
}
```

## type [HealthyResponse](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/response-healthy.go#L4-L7>)

HealthyResponse is returned by the health\-check request\.

```go
type HealthyResponse struct {
    // Status is the status returned by the service.
    Status *string `json:"status,omitempty"`
}
```

## type [Resource](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/model-resource.go#L6-L27>)

Resource is an abstract base structure with the shared attributes of all resources\.

```go
type Resource struct {
    // Id is the unique identifier of the resource; must be a UUID.
    Id  string `json:"id,omitempty"`

    // OrganisationId is the unique identifier of the organization that own the record; must be a UUID.
    OrganisationId string `json:"organisation_id,omitempty"`

    // Type is the type of the record and set by the account API.
    Type string `json:"type,omitempty"`

    // Version is a counter indicating how many times this resource has been modified. When you create a resource, it
    // is automatically set to 0. Whenever the content of the resource changes, the value of version is increased.
    // Used for concurrency control in Patch and Delete methods to avoid modifying an older version of the record that
    // has already been changed (err.g. by an internal process at Form3).
    Version *uint64 `json:"version,omitempty"` // Note: It needs to be a pointer, because we need to differ between missing and 0

    // CreatedOn is the time when the record was created, set server side.
    CreatedOn *time.Time `json:"created_on,omitempty"`

    // ModifiedOn is the time when the record was last modified, set server side.
    ModifiedOn *time.Time `json:"modified_on,omitempty"`
}
```

# f3

```go
import "command-line-arguments"
```

## Index

- [Constants](<#constants>)
- [Variables](<#variables>)
- [type Account](<#type-account>)
  - [func NewAccount(organizationId *string, country string, bankId string, bankIdCode string, accountHolder string, accountNumber string, accountCurrency string, customerId string) *Account](<#func-newaccount>)
- [type AccountAttr](<#type-accountattr>)
  - [func (aa *AccountAttr) WithStatusClosed(reason string) *AccountAttr](<#func-accountattr-withstatusclosed>)
  - [func (aa *AccountAttr) WithStatusConfirmed() *AccountAttr](<#func-accountattr-withstatusconfirmed>)
  - [func (aa *AccountAttr) WithStatusFailed() *AccountAttr](<#func-accountattr-withstatusfailed>)
  - [func (aa *AccountAttr) WithStatusPending() *AccountAttr](<#func-accountattr-withstatuspending>)
- [type AccountEnvelope](<#type-accountenvelope>)
- [type AccountStatusString](<#type-accountstatusstring>)
- [type AccountsEnvelope](<#type-accountsenvelope>)
- [type Client](<#type-client>)
  - [func NewClient() *Client](<#func-newclient>)
  - [func (c *Client) CreateAccount(account *Account) (*Account, Err)](<#func-client-createaccount>)
  - [func (c *Client) DeleteAccount(accountId string, version uint64) Err](<#func-client-deleteaccount>)
  - [func (c *Client) FetchAccount(accountId string) (*Account, Err)](<#func-client-fetchaccount>)
  - [func (c *Client) HttpClient() http.Client](<#func-client-httpclient>)
  - [func (c *Client) IsHealthy() bool](<#func-client-ishealthy>)
  - [func (c *Client) WithEndPoint(endpoint string) *Client](<#func-client-withendpoint>)
- [type Err](<#type-err>)
- [type ErrorResponse](<#type-errorresponse>)
- [type HealthyResponse](<#type-healthyresponse>)
- [type Resource](<#type-resource>)


## Constants

```go
const (
    // ErrGeneric signals a generic error.
    ErrGeneric int = iota

    // ErrJsonStringify signals that serialization to JSON failed.
    ErrJsonStringify int = iota

    // ErrJsonParse signals that the JSON parsing failed.
    ErrJsonParse int = iota

    // ErrRequest signals that the request failed.
    ErrRequest int = iota

    // ErrResponse signals that the response is erroneous.
    ErrResponse int = iota
)
```

```go
const (
    // StatusPending represents a pending (not yet confirmed) account.
    StatusPending = AccountStatusString("pending")

    // StatusConfirmed represents a confirmed account.
    StatusConfirmed = AccountStatusString("confirmed")

    // StatusClosed is an FPS only account status string and requires AccountAttr.StatusReason to be set.
    StatusClosed = AccountStatusString("closed")

    // StatusFailed is an SEPA and FPS Indirect (LHV) only account status string.
    StatusFailed = AccountStatusString("failed")

    // TypeAccount is the type for accounts.
    TypeAccount = "accounts"
)
```

Version hold the version of the client\.

```go
const Version = "0.0.1"
```

## Variables

```go
var (
    // DefaultEndPoint is the default endpoint to connect the client to.
    DefaultEndPoint = flag.String("f3.endpoint", "https://api.f3.tech/v1", "Set the default endpoint")

    // DefaultTimeout is the default timeout to be used for the http client.
    DefaultTimeout = time.Second * 5

    // DefaultOrganizationId is the default organization identifier to be used, when a new account is created. The variable
    // is initialized from the environment variable F3_CLIENT_ORG_ID
    DefaultOrganizationId string

    // DefaultIntegrationOrganizationId is the default organization identifier used for integration tests.
    DefaultIntegrationOrganizationId = "f8e803fe-6962-4811-94dc-e558610cbe78"

    // IntegrationTestAccountId is the id to be used for the integration test account, which is created and deleted.
    // Can be overridden using the environment variable F3_TEST_ACCOUNT_ID
    IntegrationTestAccountId = "f8e803fe-6962-4811-94dc-000000000000"

    // DefaultDialer is the default dialer that is being used when new Form 3 clients are created.
    DefaultDialer = &net.Dialer{}

    // DefaultTransport is the default transport configuration to be used when new Form 3 clients are created.
    DefaultTransport = &http.Transport{
        DialContext:     DefaultDialer.DialContext,
        MaxIdleConns:    10,
        IdleConnTimeout: 30 * time.Second,
    }
)
```

## type [Account](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/model-account.go#L38-L42>)

Account represents the account resource with attributes\.

```go
type Account struct {
    Resource
    // Attr are the attributes of the account.
    Attr *AccountAttr `json:"attributes,omitempty"`
}
```

### func [NewAccount](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/model-account.go#L96-L105>)

```go
func NewAccount(organizationId *string, country string, bankId string, bankIdCode string, accountHolder string, accountNumber string, accountCurrency string, customerId string) *Account
```

NewAccount is a small helper method to create a basic structure for a new account\. The created structure can be modified after creation or directly used to create a new account\. If the organization\-id is nil\, then the DefaultOrganizationId is used\. The customerId is optional and if given\, it is set\.

## type [AccountAttr](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/model-account.go#L45-L63>)

AccountAttr are the account specific attributes\.

```go
type AccountAttr struct {
    AlternativeNames        []string            `json:"alternative_names,omitempty"`
    Name                    []string            `json:"name,omitempty"`
    AccountClassification   string              `json:"account_classification,omitempty"`
    AccountNumber           string              `json:"account_number,omitempty"` // A unique account number will automatically be generated if not provided. If provided, the account number is not validated.
    BankId                  string              `json:"bank_id,omitempty"`
    BankIdCode              string              `json:"bank_id_code,omitempty"`
    BaseCurrency            string              `json:"base_currency,omitempty"`
    CustomerId              *string             `json:"customer_id,omitempty"`
    Bic                     string              `json:"bic,omitempty"`
    Country                 string              `json:"country,omitempty"`
    Iban                    string              `json:"iban,omitempty"` // Will be calculated from other fields if not supplied.
    SecondaryIdentification string              `json:"secondary_identification,omitempty"`
    Status                  AccountStatusString `json:"status,omitempty"`
    StatusReason            *string             `json:"status_reason,omitempty"`
    Switched                bool                `json:"switched,omitempty"`
    AccountMatchingOptOut   bool                `json:"account_matching_opt_out,omitempty"`
    JointAccount            bool                `json:"joint_account,omitempty"`
}
```

### func \(\*AccountAttr\) [WithStatusClosed](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/model-account.go#L80>)

```go
func (aa *AccountAttr) WithStatusClosed(reason string) *AccountAttr
```

WithStatusClosed set the status to StatusClosed\, requires reason\.

### func \(\*AccountAttr\) [WithStatusConfirmed](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/model-account.go#L73>)

```go
func (aa *AccountAttr) WithStatusConfirmed() *AccountAttr
```

WithStatusConfirmed set the status to StatusConfirmed\.

### func \(\*AccountAttr\) [WithStatusFailed](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/model-account.go#L87>)

```go
func (aa *AccountAttr) WithStatusFailed() *AccountAttr
```

WithStatusFailed set the status to StatusFailed\.

### func \(\*AccountAttr\) [WithStatusPending](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/model-account.go#L66>)

```go
func (aa *AccountAttr) WithStatusPending() *AccountAttr
```

WithStatusPending set the status to StatusPending\.

## type [AccountEnvelope](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/model-account.go#L33-L35>)

AccountEnvelope is an envelope for a single account\.

```go
type AccountEnvelope struct {
    Data *Account `json:"data"`
}
```

## type [AccountStatusString](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/model-account.go#L8>)

AccountStatusString is an alias for a string that represents the account status\.

```go
type AccountStatusString string
```

## type [AccountsEnvelope](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/model-account.go#L28-L30>)

AccountsEnvelope is an envelope for a list of accounts\.

```go
type AccountsEnvelope struct {
    Data []*Account `json:"data"`
}
```

## type [Client](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/client.go#L31-L36>)

Client is an abstraction above a http\.Client bound to a specific Form3 endpoint\.

```go
type Client struct {
    // contains filtered or unexported fields
}
```

### func [NewClient](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/client.go#L23>)

```go
func NewClient() *Client
```

NewClient creates a new Form3 client bound to the production endpoint and setup with defaults\.

### func \(\*Client\) [CreateAccount](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/client.go#L130>)

```go
func (c *Client) CreateAccount(account *Account) (*Account, Err)
```

CreateAccount creates the given account and returns the server response or an error\, when the account creation failed\.

### func \(\*Client\) [DeleteAccount](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/client.go#L174>)

```go
func (c *Client) DeleteAccount(accountId string, version uint64) Err
```

### func \(\*Client\) [FetchAccount](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/client.go#L153>)

```go
func (c *Client) FetchAccount(accountId string) (*Account, Err)
```

### func \(\*Client\) [HttpClient](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/client.go#L48>)

```go
func (c *Client) HttpClient() http.Client
```

HttpClient returns the underlying http client being used\. If the default created by NewClient is not sufficient\, modify this before using\.

### func \(\*Client\) [IsHealthy](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/client.go#L53>)

```go
func (c *Client) IsHealthy() bool
```

IsHealthy tests if the service is alive and responsive within the set request timeout\.

### func \(\*Client\) [WithEndPoint](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/client.go#L39>)

```go
func (c *Client) WithEndPoint(endpoint string) *Client
```

WithEndPoint rebinds the endpoint of the client\.

## type [Err](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/errors.go#L9-L20>)

Err is an interface to return errors\, which is compatible to the standard error interface\.

```go
type Err interface {
    // Unwrap returns the cause.
    Unwrap() error
    // Error returns the human-readable err message.
    Error() string
    // ErrorCode returns the machine-readable error code.
    ErrorCode() int
    // Request returns the HTTP request that is the reason for this error; if any.
    Request() *http.Request
    // Response returns the HTTP response that is the reason for this error; if any.
    Response() *http.Response
}
```

## type [ErrorResponse](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/response-error.go#L4-L6>)

ErrorResponse is the response the account API sends back\, when an error encountered\.

```go
type ErrorResponse struct {
    ErrorMessage string `json:"error_message"`
}
```

## type [HealthyResponse](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/response-healthy.go#L4-L7>)

HealthyResponse is returned by the health\-check request\.

```go
type HealthyResponse struct {
    // Status is the status returned by the service.
    Status *string `json:"status,omitempty"`
}
```

## type [Resource](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/model-resource.go#L6-L27>)

Resource is an abstract base structure with the shared attributes of all resources\.

```go
type Resource struct {
    // Id is the unique identifier of the resource; must be a UUID.
    Id  string `json:"id,omitempty"`

    // OrganisationId is the unique identifier of the organization that own the record; must be a UUID.
    OrganisationId string `json:"organisation_id,omitempty"`

    // Type is the type of the record and set by the account API.
    Type string `json:"type,omitempty"`

    // Version is a counter indicating how many times this resource has been modified. When you create a resource, it
    // is automatically set to 0. Whenever the content of the resource changes, the value of version is increased.
    // Used for concurrency control in Patch and Delete methods to avoid modifying an older version of the record that
    // has already been changed (err.g. by an internal process at Form3).
    Version *uint64 `json:"version,omitempty"` // Note: It needs to be a pointer, because we need to differ between missing and 0

    // CreatedOn is the time when the record was created, set server side.
    CreatedOn *time.Time `json:"created_on,omitempty"`

    // ModifiedOn is the time when the record was last modified, set server side.
    ModifiedOn *time.Time `json:"modified_on,omitempty"`
}
```

# f3

```go
import "command-line-arguments"
```

## Index

- [Constants](<#constants>)
- [Variables](<#variables>)
- [type Account](<#type-account>)
  - [func NewAccount(organizationId *string, country string, bankId string, bankIdCode string, accountHolder string, accountNumber string, accountCurrency string, customerId string) *Account](<#func-newaccount>)
- [type AccountAttr](<#type-accountattr>)
  - [func (aa *AccountAttr) WithStatusClosed(reason string) *AccountAttr](<#func-accountattr-withstatusclosed>)
  - [func (aa *AccountAttr) WithStatusConfirmed() *AccountAttr](<#func-accountattr-withstatusconfirmed>)
  - [func (aa *AccountAttr) WithStatusFailed() *AccountAttr](<#func-accountattr-withstatusfailed>)
  - [func (aa *AccountAttr) WithStatusPending() *AccountAttr](<#func-accountattr-withstatuspending>)
- [type AccountEnvelope](<#type-accountenvelope>)
- [type AccountStatusString](<#type-accountstatusstring>)
- [type AccountsEnvelope](<#type-accountsenvelope>)
- [type Client](<#type-client>)
  - [func NewClient() *Client](<#func-newclient>)
  - [func (c *Client) CreateAccount(account *Account) (*Account, Err)](<#func-client-createaccount>)
  - [func (c *Client) DeleteAccount(accountId string, version uint64) Err](<#func-client-deleteaccount>)
  - [func (c *Client) FetchAccount(accountId string) (*Account, Err)](<#func-client-fetchaccount>)
  - [func (c *Client) HttpClient() http.Client](<#func-client-httpclient>)
  - [func (c *Client) IsHealthy() bool](<#func-client-ishealthy>)
  - [func (c *Client) WithEndPoint(endpoint string) *Client](<#func-client-withendpoint>)
- [type Err](<#type-err>)
- [type ErrorResponse](<#type-errorresponse>)
- [type HealthyResponse](<#type-healthyresponse>)
- [type Resource](<#type-resource>)


## Constants

```go
const (
    // ErrGeneric signals a generic error.
    ErrGeneric int = iota

    // ErrJsonStringify signals that serialization to JSON failed.
    ErrJsonStringify int = iota

    // ErrJsonParse signals that the JSON parsing failed.
    ErrJsonParse int = iota

    // ErrRequest signals that the request failed.
    ErrRequest int = iota

    // ErrResponse signals that the response is erroneous.
    ErrResponse int = iota
)
```

```go
const (
    // StatusPending represents a pending (not yet confirmed) account.
    StatusPending = AccountStatusString("pending")

    // StatusConfirmed represents a confirmed account.
    StatusConfirmed = AccountStatusString("confirmed")

    // StatusClosed is an FPS only account status string and requires AccountAttr.StatusReason to be set.
    StatusClosed = AccountStatusString("closed")

    // StatusFailed is an SEPA and FPS Indirect (LHV) only account status string.
    StatusFailed = AccountStatusString("failed")

    // TypeAccount is the type for accounts.
    TypeAccount = "accounts"
)
```

Version hold the version of the client\.

```go
const Version = "0.0.1"
```

## Variables

```go
var (
    // DefaultEndPoint is the default endpoint to connect the client to.
    DefaultEndPoint = flag.String("f3.endpoint", "https://api.f3.tech/v1", "Set the default endpoint")

    // DefaultTimeout is the default timeout to be used for the http client.
    DefaultTimeout = time.Second * 5

    // DefaultOrganizationId is the default organization identifier to be used, when a new account is created. The variable
    // is initialized from the environment variable F3_CLIENT_ORG_ID
    DefaultOrganizationId string

    // DefaultIntegrationOrganizationId is the default organization identifier used for integration tests.
    DefaultIntegrationOrganizationId = "f8e803fe-6962-4811-94dc-e558610cbe78"

    // IntegrationTestAccountId is the id to be used for the integration test account, which is created and deleted.
    // Can be overridden using the environment variable F3_TEST_ACCOUNT_ID
    IntegrationTestAccountId = "f8e803fe-6962-4811-94dc-000000000000"

    // DefaultDialer is the default dialer that is being used when new Form 3 clients are created.
    DefaultDialer = &net.Dialer{}

    // DefaultTransport is the default transport configuration to be used when new Form 3 clients are created.
    DefaultTransport = &http.Transport{
        DialContext:     DefaultDialer.DialContext,
        MaxIdleConns:    10,
        IdleConnTimeout: 30 * time.Second,
    }
)
```

## type [Account](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/model-account.go#L38-L42>)

Account represents the account resource with attributes\.

```go
type Account struct {
    Resource
    // Attr are the attributes of the account.
    Attr *AccountAttr `json:"attributes,omitempty"`
}
```

### func [NewAccount](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/model-account.go#L96-L105>)

```go
func NewAccount(organizationId *string, country string, bankId string, bankIdCode string, accountHolder string, accountNumber string, accountCurrency string, customerId string) *Account
```

NewAccount is a small helper method to create a basic structure for a new account\. The created structure can be modified after creation or directly used to create a new account\. If the organization\-id is nil\, then the DefaultOrganizationId is used\. The customerId is optional and if given\, it is set\.

## type [AccountAttr](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/model-account.go#L45-L63>)

AccountAttr are the account specific attributes\.

```go
type AccountAttr struct {
    AlternativeNames        []string            `json:"alternative_names,omitempty"`
    Name                    []string            `json:"name,omitempty"`
    AccountClassification   string              `json:"account_classification,omitempty"`
    AccountNumber           string              `json:"account_number,omitempty"` // A unique account number will automatically be generated if not provided. If provided, the account number is not validated.
    BankId                  string              `json:"bank_id,omitempty"`
    BankIdCode              string              `json:"bank_id_code,omitempty"`
    BaseCurrency            string              `json:"base_currency,omitempty"`
    CustomerId              *string             `json:"customer_id,omitempty"`
    Bic                     string              `json:"bic,omitempty"`
    Country                 string              `json:"country,omitempty"`
    Iban                    string              `json:"iban,omitempty"` // Will be calculated from other fields if not supplied.
    SecondaryIdentification string              `json:"secondary_identification,omitempty"`
    Status                  AccountStatusString `json:"status,omitempty"`
    StatusReason            *string             `json:"status_reason,omitempty"`
    Switched                bool                `json:"switched,omitempty"`
    AccountMatchingOptOut   bool                `json:"account_matching_opt_out,omitempty"`
    JointAccount            bool                `json:"joint_account,omitempty"`
}
```

### func \(\*AccountAttr\) [WithStatusClosed](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/model-account.go#L80>)

```go
func (aa *AccountAttr) WithStatusClosed(reason string) *AccountAttr
```

WithStatusClosed set the status to StatusClosed\, requires reason\.

### func \(\*AccountAttr\) [WithStatusConfirmed](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/model-account.go#L73>)

```go
func (aa *AccountAttr) WithStatusConfirmed() *AccountAttr
```

WithStatusConfirmed set the status to StatusConfirmed\.

### func \(\*AccountAttr\) [WithStatusFailed](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/model-account.go#L87>)

```go
func (aa *AccountAttr) WithStatusFailed() *AccountAttr
```

WithStatusFailed set the status to StatusFailed\.

### func \(\*AccountAttr\) [WithStatusPending](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/model-account.go#L66>)

```go
func (aa *AccountAttr) WithStatusPending() *AccountAttr
```

WithStatusPending set the status to StatusPending\.

## type [AccountEnvelope](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/model-account.go#L33-L35>)

AccountEnvelope is an envelope for a single account\.

```go
type AccountEnvelope struct {
    Data *Account `json:"data"`
}
```

## type [AccountStatusString](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/model-account.go#L8>)

AccountStatusString is an alias for a string that represents the account status\.

```go
type AccountStatusString string
```

## type [AccountsEnvelope](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/model-account.go#L28-L30>)

AccountsEnvelope is an envelope for a list of accounts\.

```go
type AccountsEnvelope struct {
    Data []*Account `json:"data"`
}
```

## type [Client](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/client.go#L31-L36>)

Client is an abstraction above a http\.Client bound to a specific Form3 endpoint\.

```go
type Client struct {
    // contains filtered or unexported fields
}
```

### func [NewClient](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/client.go#L23>)

```go
func NewClient() *Client
```

NewClient creates a new Form3 client bound to the production endpoint and setup with defaults\.

### func \(\*Client\) [CreateAccount](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/client.go#L130>)

```go
func (c *Client) CreateAccount(account *Account) (*Account, Err)
```

CreateAccount creates the given account and returns the server response or an error\, when the account creation failed\.

### func \(\*Client\) [DeleteAccount](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/client.go#L174>)

```go
func (c *Client) DeleteAccount(accountId string, version uint64) Err
```

### func \(\*Client\) [FetchAccount](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/client.go#L153>)

```go
func (c *Client) FetchAccount(accountId string) (*Account, Err)
```

### func \(\*Client\) [HttpClient](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/client.go#L48>)

```go
func (c *Client) HttpClient() http.Client
```

HttpClient returns the underlying http client being used\. If the default created by NewClient is not sufficient\, modify this before using\.

### func \(\*Client\) [IsHealthy](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/client.go#L53>)

```go
func (c *Client) IsHealthy() bool
```

IsHealthy tests if the service is alive and responsive within the set request timeout\.

### func \(\*Client\) [WithEndPoint](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/client.go#L39>)

```go
func (c *Client) WithEndPoint(endpoint string) *Client
```

WithEndPoint rebinds the endpoint of the client\.

## type [Err](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/errors.go#L9-L20>)

Err is an interface to return errors\, which is compatible to the standard error interface\.

```go
type Err interface {
    // Unwrap returns the cause.
    Unwrap() error
    // Error returns the human-readable err message.
    Error() string
    // ErrorCode returns the machine-readable error code.
    ErrorCode() int
    // Request returns the HTTP request that is the reason for this error; if any.
    Request() *http.Request
    // Response returns the HTTP response that is the reason for this error; if any.
    Response() *http.Response
}
```

## type [ErrorResponse](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/response-error.go#L4-L6>)

ErrorResponse is the response the account API sends back\, when an error encountered\.

```go
type ErrorResponse struct {
    ErrorMessage string `json:"error_message"`
}
```

## type [HealthyResponse](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/response-healthy.go#L4-L7>)

HealthyResponse is returned by the health\-check request\.

```go
type HealthyResponse struct {
    // Status is the status returned by the service.
    Status *string `json:"status,omitempty"`
}
```

## type [Resource](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/model-resource.go#L6-L27>)

Resource is an abstract base structure with the shared attributes of all resources\.

```go
type Resource struct {
    // Id is the unique identifier of the resource; must be a UUID.
    Id  string `json:"id,omitempty"`

    // OrganisationId is the unique identifier of the organization that own the record; must be a UUID.
    OrganisationId string `json:"organisation_id,omitempty"`

    // Type is the type of the record and set by the account API.
    Type string `json:"type,omitempty"`

    // Version is a counter indicating how many times this resource has been modified. When you create a resource, it
    // is automatically set to 0. Whenever the content of the resource changes, the value of version is increased.
    // Used for concurrency control in Patch and Delete methods to avoid modifying an older version of the record that
    // has already been changed (err.g. by an internal process at Form3).
    Version *uint64 `json:"version,omitempty"` // Note: It needs to be a pointer, because we need to differ between missing and 0

    // CreatedOn is the time when the record was created, set server side.
    CreatedOn *time.Time `json:"created_on,omitempty"`

    // ModifiedOn is the time when the record was last modified, set server side.
    ModifiedOn *time.Time `json:"modified_on,omitempty"`
}
```

# f3

```go
import "command-line-arguments"
```

## Index

- [Constants](<#constants>)
- [Variables](<#variables>)
- [type Account](<#type-account>)
  - [func NewAccount(organizationId *string, country string, bankId string, bankIdCode string, accountHolder string, accountNumber string, accountCurrency string, customerId string) *Account](<#func-newaccount>)
- [type AccountAttr](<#type-accountattr>)
  - [func (aa *AccountAttr) WithStatusClosed(reason string) *AccountAttr](<#func-accountattr-withstatusclosed>)
  - [func (aa *AccountAttr) WithStatusConfirmed() *AccountAttr](<#func-accountattr-withstatusconfirmed>)
  - [func (aa *AccountAttr) WithStatusFailed() *AccountAttr](<#func-accountattr-withstatusfailed>)
  - [func (aa *AccountAttr) WithStatusPending() *AccountAttr](<#func-accountattr-withstatuspending>)
- [type AccountEnvelope](<#type-accountenvelope>)
- [type AccountStatusString](<#type-accountstatusstring>)
- [type AccountsEnvelope](<#type-accountsenvelope>)
- [type Client](<#type-client>)
  - [func NewClient() *Client](<#func-newclient>)
  - [func (c *Client) CreateAccount(account *Account) (*Account, Err)](<#func-client-createaccount>)
  - [func (c *Client) DeleteAccount(accountId string, version uint64) Err](<#func-client-deleteaccount>)
  - [func (c *Client) FetchAccount(accountId string) (*Account, Err)](<#func-client-fetchaccount>)
  - [func (c *Client) HttpClient() http.Client](<#func-client-httpclient>)
  - [func (c *Client) IsHealthy() bool](<#func-client-ishealthy>)
  - [func (c *Client) WithEndPoint(endpoint string) *Client](<#func-client-withendpoint>)
- [type Err](<#type-err>)
- [type ErrorResponse](<#type-errorresponse>)
- [type HealthyResponse](<#type-healthyresponse>)
- [type Resource](<#type-resource>)


## Constants

```go
const (
    // ErrGeneric signals a generic error.
    ErrGeneric int = iota

    // ErrJsonStringify signals that serialization to JSON failed.
    ErrJsonStringify int = iota

    // ErrJsonParse signals that the JSON parsing failed.
    ErrJsonParse int = iota

    // ErrRequest signals that the request failed.
    ErrRequest int = iota

    // ErrResponse signals that the response is erroneous.
    ErrResponse int = iota
)
```

```go
const (
    // StatusPending represents a pending (not yet confirmed) account.
    StatusPending = AccountStatusString("pending")

    // StatusConfirmed represents a confirmed account.
    StatusConfirmed = AccountStatusString("confirmed")

    // StatusClosed is an FPS only account status string and requires AccountAttr.StatusReason to be set.
    StatusClosed = AccountStatusString("closed")

    // StatusFailed is an SEPA and FPS Indirect (LHV) only account status string.
    StatusFailed = AccountStatusString("failed")

    // TypeAccount is the type for accounts.
    TypeAccount = "accounts"
)
```

Version hold the version of the client\.

```go
const Version = "0.0.1"
```

## Variables

```go
var (
    // DefaultEndPoint is the default endpoint to connect the client to.
    DefaultEndPoint = flag.String("f3.endpoint", "https://api.f3.tech/v1", "Set the default endpoint")

    // DefaultTimeout is the default timeout to be used for the http client.
    DefaultTimeout = time.Second * 5

    // DefaultOrganizationId is the default organization identifier to be used, when a new account is created. The variable
    // is initialized from the environment variable F3_CLIENT_ORG_ID
    DefaultOrganizationId string

    // DefaultIntegrationOrganizationId is the default organization identifier used for integration tests.
    DefaultIntegrationOrganizationId = "f8e803fe-6962-4811-94dc-e558610cbe78"

    // IntegrationTestAccountId is the id to be used for the integration test account, which is created and deleted.
    // Can be overridden using the environment variable F3_TEST_ACCOUNT_ID
    IntegrationTestAccountId = "f8e803fe-6962-4811-94dc-000000000000"

    // DefaultDialer is the default dialer that is being used when new Form 3 clients are created.
    DefaultDialer = &net.Dialer{}

    // DefaultTransport is the default transport configuration to be used when new Form 3 clients are created.
    DefaultTransport = &http.Transport{
        DialContext:     DefaultDialer.DialContext,
        MaxIdleConns:    10,
        IdleConnTimeout: 30 * time.Second,
    }
)
```

## type [Account](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/model-account.go#L38-L42>)

Account represents the account resource with attributes\.

```go
type Account struct {
    Resource
    // Attr are the attributes of the account.
    Attr *AccountAttr `json:"attributes,omitempty"`
}
```

### func [NewAccount](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/model-account.go#L96-L105>)

```go
func NewAccount(organizationId *string, country string, bankId string, bankIdCode string, accountHolder string, accountNumber string, accountCurrency string, customerId string) *Account
```

NewAccount is a small helper method to create a basic structure for a new account\. The created structure can be modified after creation or directly used to create a new account\. If the organization\-id is nil\, then the DefaultOrganizationId is used\. The customerId is optional and if given\, it is set\.

## type [AccountAttr](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/model-account.go#L45-L63>)

AccountAttr are the account specific attributes\.

```go
type AccountAttr struct {
    AlternativeNames        []string            `json:"alternative_names,omitempty"`
    Name                    []string            `json:"name,omitempty"`
    AccountClassification   string              `json:"account_classification,omitempty"`
    AccountNumber           string              `json:"account_number,omitempty"` // A unique account number will automatically be generated if not provided. If provided, the account number is not validated.
    BankId                  string              `json:"bank_id,omitempty"`
    BankIdCode              string              `json:"bank_id_code,omitempty"`
    BaseCurrency            string              `json:"base_currency,omitempty"`
    CustomerId              *string             `json:"customer_id,omitempty"`
    Bic                     string              `json:"bic,omitempty"`
    Country                 string              `json:"country,omitempty"`
    Iban                    string              `json:"iban,omitempty"` // Will be calculated from other fields if not supplied.
    SecondaryIdentification string              `json:"secondary_identification,omitempty"`
    Status                  AccountStatusString `json:"status,omitempty"`
    StatusReason            *string             `json:"status_reason,omitempty"`
    Switched                bool                `json:"switched,omitempty"`
    AccountMatchingOptOut   bool                `json:"account_matching_opt_out,omitempty"`
    JointAccount            bool                `json:"joint_account,omitempty"`
}
```

### func \(\*AccountAttr\) [WithStatusClosed](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/model-account.go#L80>)

```go
func (aa *AccountAttr) WithStatusClosed(reason string) *AccountAttr
```

WithStatusClosed set the status to StatusClosed\, requires reason\.

### func \(\*AccountAttr\) [WithStatusConfirmed](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/model-account.go#L73>)

```go
func (aa *AccountAttr) WithStatusConfirmed() *AccountAttr
```

WithStatusConfirmed set the status to StatusConfirmed\.

### func \(\*AccountAttr\) [WithStatusFailed](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/model-account.go#L87>)

```go
func (aa *AccountAttr) WithStatusFailed() *AccountAttr
```

WithStatusFailed set the status to StatusFailed\.

### func \(\*AccountAttr\) [WithStatusPending](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/model-account.go#L66>)

```go
func (aa *AccountAttr) WithStatusPending() *AccountAttr
```

WithStatusPending set the status to StatusPending\.

## type [AccountEnvelope](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/model-account.go#L33-L35>)

AccountEnvelope is an envelope for a single account\.

```go
type AccountEnvelope struct {
    Data *Account `json:"data"`
}
```

## type [AccountStatusString](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/model-account.go#L8>)

AccountStatusString is an alias for a string that represents the account status\.

```go
type AccountStatusString string
```

## type [AccountsEnvelope](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/model-account.go#L28-L30>)

AccountsEnvelope is an envelope for a list of accounts\.

```go
type AccountsEnvelope struct {
    Data []*Account `json:"data"`
}
```

## type [Client](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/client.go#L31-L36>)

Client is an abstraction above a http\.Client bound to a specific Form3 endpoint\.

```go
type Client struct {
    // contains filtered or unexported fields
}
```

### func [NewClient](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/client.go#L23>)

```go
func NewClient() *Client
```

NewClient creates a new Form3 client bound to the production endpoint and setup with defaults\.

### func \(\*Client\) [CreateAccount](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/client.go#L130>)

```go
func (c *Client) CreateAccount(account *Account) (*Account, Err)
```

CreateAccount creates the given account and returns the server response or an error\, when the account creation failed\.

### func \(\*Client\) [DeleteAccount](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/client.go#L174>)

```go
func (c *Client) DeleteAccount(accountId string, version uint64) Err
```

### func \(\*Client\) [FetchAccount](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/client.go#L153>)

```go
func (c *Client) FetchAccount(accountId string) (*Account, Err)
```

### func \(\*Client\) [HttpClient](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/client.go#L48>)

```go
func (c *Client) HttpClient() http.Client
```

HttpClient returns the underlying http client being used\. If the default created by NewClient is not sufficient\, modify this before using\.

### func \(\*Client\) [IsHealthy](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/client.go#L53>)

```go
func (c *Client) IsHealthy() bool
```

IsHealthy tests if the service is alive and responsive within the set request timeout\.

### func \(\*Client\) [WithEndPoint](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/client.go#L39>)

```go
func (c *Client) WithEndPoint(endpoint string) *Client
```

WithEndPoint rebinds the endpoint of the client\.

## type [Err](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/errors.go#L9-L20>)

Err is an interface to return errors\, which is compatible to the standard error interface\.

```go
type Err interface {
    // Unwrap returns the cause.
    Unwrap() error
    // Error returns the human-readable err message.
    Error() string
    // ErrorCode returns the machine-readable error code.
    ErrorCode() int
    // Request returns the HTTP request that is the reason for this error; if any.
    Request() *http.Request
    // Response returns the HTTP response that is the reason for this error; if any.
    Response() *http.Response
}
```

## type [ErrorResponse](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/response-error.go#L4-L6>)

ErrorResponse is the response the account API sends back\, when an error encountered\.

```go
type ErrorResponse struct {
    ErrorMessage string `json:"error_message"`
}
```

## type [HealthyResponse](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/response-healthy.go#L4-L7>)

HealthyResponse is returned by the health\-check request\.

```go
type HealthyResponse struct {
    // Status is the status returned by the service.
    Status *string `json:"status,omitempty"`
}
```

## type [Resource](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/model-resource.go#L6-L27>)

Resource is an abstract base structure with the shared attributes of all resources\.

```go
type Resource struct {
    // Id is the unique identifier of the resource; must be a UUID.
    Id  string `json:"id,omitempty"`

    // OrganisationId is the unique identifier of the organization that own the record; must be a UUID.
    OrganisationId string `json:"organisation_id,omitempty"`

    // Type is the type of the record and set by the account API.
    Type string `json:"type,omitempty"`

    // Version is a counter indicating how many times this resource has been modified. When you create a resource, it
    // is automatically set to 0. Whenever the content of the resource changes, the value of version is increased.
    // Used for concurrency control in Patch and Delete methods to avoid modifying an older version of the record that
    // has already been changed (err.g. by an internal process at Form3).
    Version *uint64 `json:"version,omitempty"` // Note: It needs to be a pointer, because we need to differ between missing and 0

    // CreatedOn is the time when the record was created, set server side.
    CreatedOn *time.Time `json:"created_on,omitempty"`

    // ModifiedOn is the time when the record was last modified, set server side.
    ModifiedOn *time.Time `json:"modified_on,omitempty"`
}
```

# f3

```go
import "command-line-arguments"
```

## Index

- [Constants](<#constants>)
- [Variables](<#variables>)
- [type Account](<#type-account>)
  - [func NewAccount(organizationId *string, country string, bankId string, bankIdCode string, accountHolder string, accountNumber string, accountCurrency string, customerId string) *Account](<#func-newaccount>)
- [type AccountAttr](<#type-accountattr>)
  - [func (aa *AccountAttr) WithStatusClosed(reason string) *AccountAttr](<#func-accountattr-withstatusclosed>)
  - [func (aa *AccountAttr) WithStatusConfirmed() *AccountAttr](<#func-accountattr-withstatusconfirmed>)
  - [func (aa *AccountAttr) WithStatusFailed() *AccountAttr](<#func-accountattr-withstatusfailed>)
  - [func (aa *AccountAttr) WithStatusPending() *AccountAttr](<#func-accountattr-withstatuspending>)
- [type AccountEnvelope](<#type-accountenvelope>)
- [type AccountStatusString](<#type-accountstatusstring>)
- [type AccountsEnvelope](<#type-accountsenvelope>)
- [type Client](<#type-client>)
  - [func NewClient() *Client](<#func-newclient>)
  - [func (c *Client) CreateAccount(account *Account) (*Account, Err)](<#func-client-createaccount>)
  - [func (c *Client) DeleteAccount(accountId string, version uint64) Err](<#func-client-deleteaccount>)
  - [func (c *Client) FetchAccount(accountId string) (*Account, Err)](<#func-client-fetchaccount>)
  - [func (c *Client) HttpClient() http.Client](<#func-client-httpclient>)
  - [func (c *Client) IsHealthy() bool](<#func-client-ishealthy>)
  - [func (c *Client) WithEndPoint(endpoint string) *Client](<#func-client-withendpoint>)
- [type Err](<#type-err>)
- [type ErrorResponse](<#type-errorresponse>)
- [type HealthyResponse](<#type-healthyresponse>)
- [type Resource](<#type-resource>)


## Constants

```go
const (
    // ErrGeneric signals a generic error.
    ErrGeneric int = iota

    // ErrJsonStringify signals that serialization to JSON failed.
    ErrJsonStringify int = iota

    // ErrJsonParse signals that the JSON parsing failed.
    ErrJsonParse int = iota

    // ErrRequest signals that the request failed.
    ErrRequest int = iota

    // ErrResponse signals that the response is erroneous.
    ErrResponse int = iota
)
```

```go
const (
    // StatusPending represents a pending (not yet confirmed) account.
    StatusPending = AccountStatusString("pending")

    // StatusConfirmed represents a confirmed account.
    StatusConfirmed = AccountStatusString("confirmed")

    // StatusClosed is an FPS only account status string and requires AccountAttr.StatusReason to be set.
    StatusClosed = AccountStatusString("closed")

    // StatusFailed is an SEPA and FPS Indirect (LHV) only account status string.
    StatusFailed = AccountStatusString("failed")

    // TypeAccount is the type for accounts.
    TypeAccount = "accounts"
)
```

Version hold the version of the client\.

```go
const Version = "0.0.1"
```

## Variables

```go
var (
    // DefaultEndPoint is the default endpoint to connect the client to.
    DefaultEndPoint = flag.String("f3.endpoint", "https://api.f3.tech/v1", "Set the default endpoint")

    // DefaultTimeout is the default timeout to be used for the http client.
    DefaultTimeout = time.Second * 5

    // DefaultOrganizationId is the default organization identifier to be used, when a new account is created. The variable
    // is initialized from the environment variable F3_CLIENT_ORG_ID
    DefaultOrganizationId string

    // DefaultIntegrationOrganizationId is the default organization identifier used for integration tests.
    DefaultIntegrationOrganizationId = "f8e803fe-6962-4811-94dc-e558610cbe78"

    // IntegrationTestAccountId is the id to be used for the integration test account, which is created and deleted.
    // Can be overridden using the environment variable F3_TEST_ACCOUNT_ID
    IntegrationTestAccountId = "f8e803fe-6962-4811-94dc-000000000000"

    // DefaultDialer is the default dialer that is being used when new Form 3 clients are created.
    DefaultDialer = &net.Dialer{}

    // DefaultTransport is the default transport configuration to be used when new Form 3 clients are created.
    DefaultTransport = &http.Transport{
        DialContext:     DefaultDialer.DialContext,
        MaxIdleConns:    10,
        IdleConnTimeout: 30 * time.Second,
    }
)
```

## type [Account](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/model-account.go#L38-L42>)

Account represents the account resource with attributes\.

```go
type Account struct {
    Resource
    // Attr are the attributes of the account.
    Attr *AccountAttr `json:"attributes,omitempty"`
}
```

### func [NewAccount](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/model-account.go#L96-L105>)

```go
func NewAccount(organizationId *string, country string, bankId string, bankIdCode string, accountHolder string, accountNumber string, accountCurrency string, customerId string) *Account
```

NewAccount is a small helper method to create a basic structure for a new account\. The created structure can be modified after creation or directly used to create a new account\. If the organization\-id is nil\, then the DefaultOrganizationId is used\. The customerId is optional and if given\, it is set\.

## type [AccountAttr](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/model-account.go#L45-L63>)

AccountAttr are the account specific attributes\.

```go
type AccountAttr struct {
    AlternativeNames        []string            `json:"alternative_names,omitempty"`
    Name                    []string            `json:"name,omitempty"`
    AccountClassification   string              `json:"account_classification,omitempty"`
    AccountNumber           string              `json:"account_number,omitempty"` // A unique account number will automatically be generated if not provided. If provided, the account number is not validated.
    BankId                  string              `json:"bank_id,omitempty"`
    BankIdCode              string              `json:"bank_id_code,omitempty"`
    BaseCurrency            string              `json:"base_currency,omitempty"`
    CustomerId              *string             `json:"customer_id,omitempty"`
    Bic                     string              `json:"bic,omitempty"`
    Country                 string              `json:"country,omitempty"`
    Iban                    string              `json:"iban,omitempty"` // Will be calculated from other fields if not supplied.
    SecondaryIdentification string              `json:"secondary_identification,omitempty"`
    Status                  AccountStatusString `json:"status,omitempty"`
    StatusReason            *string             `json:"status_reason,omitempty"`
    Switched                bool                `json:"switched,omitempty"`
    AccountMatchingOptOut   bool                `json:"account_matching_opt_out,omitempty"`
    JointAccount            bool                `json:"joint_account,omitempty"`
}
```

### func \(\*AccountAttr\) [WithStatusClosed](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/model-account.go#L80>)

```go
func (aa *AccountAttr) WithStatusClosed(reason string) *AccountAttr
```

WithStatusClosed set the status to StatusClosed\, requires reason\.

### func \(\*AccountAttr\) [WithStatusConfirmed](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/model-account.go#L73>)

```go
func (aa *AccountAttr) WithStatusConfirmed() *AccountAttr
```

WithStatusConfirmed set the status to StatusConfirmed\.

### func \(\*AccountAttr\) [WithStatusFailed](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/model-account.go#L87>)

```go
func (aa *AccountAttr) WithStatusFailed() *AccountAttr
```

WithStatusFailed set the status to StatusFailed\.

### func \(\*AccountAttr\) [WithStatusPending](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/model-account.go#L66>)

```go
func (aa *AccountAttr) WithStatusPending() *AccountAttr
```

WithStatusPending set the status to StatusPending\.

## type [AccountEnvelope](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/model-account.go#L33-L35>)

AccountEnvelope is an envelope for a single account\.

```go
type AccountEnvelope struct {
    Data *Account `json:"data"`
}
```

## type [AccountStatusString](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/model-account.go#L8>)

AccountStatusString is an alias for a string that represents the account status\.

```go
type AccountStatusString string
```

## type [AccountsEnvelope](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/model-account.go#L28-L30>)

AccountsEnvelope is an envelope for a list of accounts\.

```go
type AccountsEnvelope struct {
    Data []*Account `json:"data"`
}
```

## type [Client](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/client.go#L31-L36>)

Client is an abstraction above a http\.Client bound to a specific Form3 endpoint\.

```go
type Client struct {
    // contains filtered or unexported fields
}
```

### func [NewClient](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/client.go#L23>)

```go
func NewClient() *Client
```

NewClient creates a new Form3 client bound to the production endpoint and setup with defaults\.

### func \(\*Client\) [CreateAccount](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/client.go#L130>)

```go
func (c *Client) CreateAccount(account *Account) (*Account, Err)
```

CreateAccount creates the given account and returns the server response or an error\, when the account creation failed\.

### func \(\*Client\) [DeleteAccount](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/client.go#L174>)

```go
func (c *Client) DeleteAccount(accountId string, version uint64) Err
```

### func \(\*Client\) [FetchAccount](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/client.go#L153>)

```go
func (c *Client) FetchAccount(accountId string) (*Account, Err)
```

### func \(\*Client\) [HttpClient](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/client.go#L48>)

```go
func (c *Client) HttpClient() http.Client
```

HttpClient returns the underlying http client being used\. If the default created by NewClient is not sufficient\, modify this before using\.

### func \(\*Client\) [IsHealthy](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/client.go#L53>)

```go
func (c *Client) IsHealthy() bool
```

IsHealthy tests if the service is alive and responsive within the set request timeout\.

### func \(\*Client\) [WithEndPoint](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/client.go#L39>)

```go
func (c *Client) WithEndPoint(endpoint string) *Client
```

WithEndPoint rebinds the endpoint of the client\.

## type [Err](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/errors.go#L9-L20>)

Err is an interface to return errors\, which is compatible to the standard error interface\.

```go
type Err interface {
    // Unwrap returns the cause.
    Unwrap() error
    // Error returns the human-readable err message.
    Error() string
    // ErrorCode returns the machine-readable error code.
    ErrorCode() int
    // Request returns the HTTP request that is the reason for this error; if any.
    Request() *http.Request
    // Response returns the HTTP response that is the reason for this error; if any.
    Response() *http.Response
}
```

## type [ErrorResponse](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/response-error.go#L4-L6>)

ErrorResponse is the response the account API sends back\, when an error encountered\.

```go
type ErrorResponse struct {
    ErrorMessage string `json:"error_message"`
}
```

## type [HealthyResponse](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/response-healthy.go#L4-L7>)

HealthyResponse is returned by the health\-check request\.

```go
type HealthyResponse struct {
    // Status is the status returned by the service.
    Status *string `json:"status,omitempty"`
}
```

## type [Resource](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/model-resource.go#L6-L27>)

Resource is an abstract base structure with the shared attributes of all resources\.

```go
type Resource struct {
    // Id is the unique identifier of the resource; must be a UUID.
    Id  string `json:"id,omitempty"`

    // OrganisationId is the unique identifier of the organization that own the record; must be a UUID.
    OrganisationId string `json:"organisation_id,omitempty"`

    // Type is the type of the record and set by the account API.
    Type string `json:"type,omitempty"`

    // Version is a counter indicating how many times this resource has been modified. When you create a resource, it
    // is automatically set to 0. Whenever the content of the resource changes, the value of version is increased.
    // Used for concurrency control in Patch and Delete methods to avoid modifying an older version of the record that
    // has already been changed (err.g. by an internal process at Form3).
    Version *uint64 `json:"version,omitempty"` // Note: It needs to be a pointer, because we need to differ between missing and 0

    // CreatedOn is the time when the record was created, set server side.
    CreatedOn *time.Time `json:"created_on,omitempty"`

    // ModifiedOn is the time when the record was last modified, set server side.
    ModifiedOn *time.Time `json:"modified_on,omitempty"`
}
```

# f3

```go
import "command-line-arguments"
```

## Index

- [Constants](<#constants>)
- [Variables](<#variables>)
- [type Account](<#type-account>)
  - [func NewAccount(organizationId *string, country string, bankId string, bankIdCode string, accountHolder string, accountNumber string, accountCurrency string, customerId string) *Account](<#func-newaccount>)
- [type AccountAttr](<#type-accountattr>)
  - [func (aa *AccountAttr) WithStatusClosed(reason string) *AccountAttr](<#func-accountattr-withstatusclosed>)
  - [func (aa *AccountAttr) WithStatusConfirmed() *AccountAttr](<#func-accountattr-withstatusconfirmed>)
  - [func (aa *AccountAttr) WithStatusFailed() *AccountAttr](<#func-accountattr-withstatusfailed>)
  - [func (aa *AccountAttr) WithStatusPending() *AccountAttr](<#func-accountattr-withstatuspending>)
- [type AccountEnvelope](<#type-accountenvelope>)
- [type AccountStatusString](<#type-accountstatusstring>)
- [type AccountsEnvelope](<#type-accountsenvelope>)
- [type Client](<#type-client>)
  - [func NewClient() *Client](<#func-newclient>)
  - [func (c *Client) CreateAccount(account *Account) (*Account, Err)](<#func-client-createaccount>)
  - [func (c *Client) DeleteAccount(accountId string, version uint64) Err](<#func-client-deleteaccount>)
  - [func (c *Client) FetchAccount(accountId string) (*Account, Err)](<#func-client-fetchaccount>)
  - [func (c *Client) HttpClient() http.Client](<#func-client-httpclient>)
  - [func (c *Client) IsHealthy() bool](<#func-client-ishealthy>)
  - [func (c *Client) WithEndPoint(endpoint string) *Client](<#func-client-withendpoint>)
- [type Err](<#type-err>)
- [type ErrorResponse](<#type-errorresponse>)
- [type HealthyResponse](<#type-healthyresponse>)
- [type Resource](<#type-resource>)


## Constants

```go
const (
    // ErrGeneric signals a generic error.
    ErrGeneric int = iota

    // ErrJsonStringify signals that serialization to JSON failed.
    ErrJsonStringify int = iota

    // ErrJsonParse signals that the JSON parsing failed.
    ErrJsonParse int = iota

    // ErrRequest signals that the request failed.
    ErrRequest int = iota

    // ErrResponse signals that the response is erroneous.
    ErrResponse int = iota
)
```

```go
const (
    // StatusPending represents a pending (not yet confirmed) account.
    StatusPending = AccountStatusString("pending")

    // StatusConfirmed represents a confirmed account.
    StatusConfirmed = AccountStatusString("confirmed")

    // StatusClosed is an FPS only account status string and requires AccountAttr.StatusReason to be set.
    StatusClosed = AccountStatusString("closed")

    // StatusFailed is an SEPA and FPS Indirect (LHV) only account status string.
    StatusFailed = AccountStatusString("failed")

    // TypeAccount is the type for accounts.
    TypeAccount = "accounts"
)
```

Version hold the version of the client\.

```go
const Version = "0.0.1"
```

## Variables

```go
var (
    // DefaultEndPoint is the default endpoint to connect the client to.
    DefaultEndPoint = flag.String("f3.endpoint", "https://api.f3.tech/v1", "Set the default endpoint")

    // DefaultTimeout is the default timeout to be used for the http client.
    DefaultTimeout = time.Second * 5

    // DefaultOrganizationId is the default organization identifier to be used, when a new account is created. The variable
    // is initialized from the environment variable F3_CLIENT_ORG_ID
    DefaultOrganizationId string

    // DefaultIntegrationOrganizationId is the default organization identifier used for integration tests.
    DefaultIntegrationOrganizationId = "f8e803fe-6962-4811-94dc-e558610cbe78"

    // IntegrationTestAccountId is the id to be used for the integration test account, which is created and deleted.
    // Can be overridden using the environment variable F3_TEST_ACCOUNT_ID
    IntegrationTestAccountId = "f8e803fe-6962-4811-94dc-000000000000"

    // DefaultDialer is the default dialer that is being used when new Form 3 clients are created.
    DefaultDialer = &net.Dialer{}

    // DefaultTransport is the default transport configuration to be used when new Form 3 clients are created.
    DefaultTransport = &http.Transport{
        DialContext:     DefaultDialer.DialContext,
        MaxIdleConns:    10,
        IdleConnTimeout: 30 * time.Second,
    }
)
```

## type [Account](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/model-account.go#L38-L42>)

Account represents the account resource with attributes\.

```go
type Account struct {
    Resource
    // Attr are the attributes of the account.
    Attr *AccountAttr `json:"attributes,omitempty"`
}
```

### func [NewAccount](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/model-account.go#L96-L105>)

```go
func NewAccount(organizationId *string, country string, bankId string, bankIdCode string, accountHolder string, accountNumber string, accountCurrency string, customerId string) *Account
```

NewAccount is a small helper method to create a basic structure for a new account\. The created structure can be modified after creation or directly used to create a new account\. If the organization\-id is nil\, then the DefaultOrganizationId is used\. The customerId is optional and if given\, it is set\.

## type [AccountAttr](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/model-account.go#L45-L63>)

AccountAttr are the account specific attributes\.

```go
type AccountAttr struct {
    AlternativeNames        []string            `json:"alternative_names,omitempty"`
    Name                    []string            `json:"name,omitempty"`
    AccountClassification   string              `json:"account_classification,omitempty"`
    AccountNumber           string              `json:"account_number,omitempty"` // A unique account number will automatically be generated if not provided. If provided, the account number is not validated.
    BankId                  string              `json:"bank_id,omitempty"`
    BankIdCode              string              `json:"bank_id_code,omitempty"`
    BaseCurrency            string              `json:"base_currency,omitempty"`
    CustomerId              *string             `json:"customer_id,omitempty"`
    Bic                     string              `json:"bic,omitempty"`
    Country                 string              `json:"country,omitempty"`
    Iban                    string              `json:"iban,omitempty"` // Will be calculated from other fields if not supplied.
    SecondaryIdentification string              `json:"secondary_identification,omitempty"`
    Status                  AccountStatusString `json:"status,omitempty"`
    StatusReason            *string             `json:"status_reason,omitempty"`
    Switched                bool                `json:"switched,omitempty"`
    AccountMatchingOptOut   bool                `json:"account_matching_opt_out,omitempty"`
    JointAccount            bool                `json:"joint_account,omitempty"`
}
```

### func \(\*AccountAttr\) [WithStatusClosed](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/model-account.go#L80>)

```go
func (aa *AccountAttr) WithStatusClosed(reason string) *AccountAttr
```

WithStatusClosed set the status to StatusClosed\, requires reason\.

### func \(\*AccountAttr\) [WithStatusConfirmed](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/model-account.go#L73>)

```go
func (aa *AccountAttr) WithStatusConfirmed() *AccountAttr
```

WithStatusConfirmed set the status to StatusConfirmed\.

### func \(\*AccountAttr\) [WithStatusFailed](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/model-account.go#L87>)

```go
func (aa *AccountAttr) WithStatusFailed() *AccountAttr
```

WithStatusFailed set the status to StatusFailed\.

### func \(\*AccountAttr\) [WithStatusPending](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/model-account.go#L66>)

```go
func (aa *AccountAttr) WithStatusPending() *AccountAttr
```

WithStatusPending set the status to StatusPending\.

## type [AccountEnvelope](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/model-account.go#L33-L35>)

AccountEnvelope is an envelope for a single account\.

```go
type AccountEnvelope struct {
    Data *Account `json:"data"`
}
```

## type [AccountStatusString](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/model-account.go#L8>)

AccountStatusString is an alias for a string that represents the account status\.

```go
type AccountStatusString string
```

## type [AccountsEnvelope](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/model-account.go#L28-L30>)

AccountsEnvelope is an envelope for a list of accounts\.

```go
type AccountsEnvelope struct {
    Data []*Account `json:"data"`
}
```

## type [Client](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/client.go#L31-L36>)

Client is an abstraction above a http\.Client bound to a specific Form3 endpoint\.

```go
type Client struct {
    // contains filtered or unexported fields
}
```

### func [NewClient](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/client.go#L23>)

```go
func NewClient() *Client
```

NewClient creates a new Form3 client bound to the production endpoint and setup with defaults\.

### func \(\*Client\) [CreateAccount](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/client.go#L130>)

```go
func (c *Client) CreateAccount(account *Account) (*Account, Err)
```

CreateAccount creates the given account and returns the server response or an error\, when the account creation failed\.

### func \(\*Client\) [DeleteAccount](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/client.go#L174>)

```go
func (c *Client) DeleteAccount(accountId string, version uint64) Err
```

### func \(\*Client\) [FetchAccount](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/client.go#L153>)

```go
func (c *Client) FetchAccount(accountId string) (*Account, Err)
```

### func \(\*Client\) [HttpClient](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/client.go#L48>)

```go
func (c *Client) HttpClient() http.Client
```

HttpClient returns the underlying http client being used\. If the default created by NewClient is not sufficient\, modify this before using\.

### func \(\*Client\) [IsHealthy](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/client.go#L53>)

```go
func (c *Client) IsHealthy() bool
```

IsHealthy tests if the service is alive and responsive within the set request timeout\.

### func \(\*Client\) [WithEndPoint](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/client.go#L39>)

```go
func (c *Client) WithEndPoint(endpoint string) *Client
```

WithEndPoint rebinds the endpoint of the client\.

## type [Err](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/errors.go#L9-L20>)

Err is an interface to return errors\, which is compatible to the standard error interface\.

```go
type Err interface {
    // Unwrap returns the cause.
    Unwrap() error
    // Error returns the human-readable err message.
    Error() string
    // ErrorCode returns the machine-readable error code.
    ErrorCode() int
    // Request returns the HTTP request that is the reason for this error; if any.
    Request() *http.Request
    // Response returns the HTTP response that is the reason for this error; if any.
    Response() *http.Response
}
```

## type [ErrorResponse](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/response-error.go#L4-L6>)

ErrorResponse is the response the account API sends back\, when an error encountered\.

```go
type ErrorResponse struct {
    ErrorMessage string `json:"error_message"`
}
```

## type [HealthyResponse](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/response-healthy.go#L4-L7>)

HealthyResponse is returned by the health\-check request\.

```go
type HealthyResponse struct {
    // Status is the status returned by the service.
    Status *string `json:"status,omitempty"`
}
```

## type [Resource](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/model-resource.go#L6-L27>)

Resource is an abstract base structure with the shared attributes of all resources\.

```go
type Resource struct {
    // Id is the unique identifier of the resource; must be a UUID.
    Id  string `json:"id,omitempty"`

    // OrganisationId is the unique identifier of the organization that own the record; must be a UUID.
    OrganisationId string `json:"organisation_id,omitempty"`

    // Type is the type of the record and set by the account API.
    Type string `json:"type,omitempty"`

    // Version is a counter indicating how many times this resource has been modified. When you create a resource, it
    // is automatically set to 0. Whenever the content of the resource changes, the value of version is increased.
    // Used for concurrency control in Patch and Delete methods to avoid modifying an older version of the record that
    // has already been changed (err.g. by an internal process at Form3).
    Version *uint64 `json:"version,omitempty"` // Note: It needs to be a pointer, because we need to differ between missing and 0

    // CreatedOn is the time when the record was created, set server side.
    CreatedOn *time.Time `json:"created_on,omitempty"`

    // ModifiedOn is the time when the record was last modified, set server side.
    ModifiedOn *time.Time `json:"modified_on,omitempty"`
}
```

# f3

```go
import "command-line-arguments"
```

## Index

- [Constants](<#constants>)
- [Variables](<#variables>)
- [type Account](<#type-account>)
  - [func NewAccount(organizationId *string, country string, bankId string, bankIdCode string, accountHolder string, accountNumber string, accountCurrency string, customerId string) *Account](<#func-newaccount>)
- [type AccountAttr](<#type-accountattr>)
  - [func (aa *AccountAttr) WithStatusClosed(reason string) *AccountAttr](<#func-accountattr-withstatusclosed>)
  - [func (aa *AccountAttr) WithStatusConfirmed() *AccountAttr](<#func-accountattr-withstatusconfirmed>)
  - [func (aa *AccountAttr) WithStatusFailed() *AccountAttr](<#func-accountattr-withstatusfailed>)
  - [func (aa *AccountAttr) WithStatusPending() *AccountAttr](<#func-accountattr-withstatuspending>)
- [type AccountEnvelope](<#type-accountenvelope>)
- [type AccountStatusString](<#type-accountstatusstring>)
- [type AccountsEnvelope](<#type-accountsenvelope>)
- [type Client](<#type-client>)
  - [func NewClient() *Client](<#func-newclient>)
  - [func (c *Client) CreateAccount(account *Account) (*Account, Err)](<#func-client-createaccount>)
  - [func (c *Client) DeleteAccount(accountId string, version uint64) Err](<#func-client-deleteaccount>)
  - [func (c *Client) FetchAccount(accountId string) (*Account, Err)](<#func-client-fetchaccount>)
  - [func (c *Client) HttpClient() http.Client](<#func-client-httpclient>)
  - [func (c *Client) IsHealthy() bool](<#func-client-ishealthy>)
  - [func (c *Client) WithEndPoint(endpoint string) *Client](<#func-client-withendpoint>)
- [type Err](<#type-err>)
- [type ErrorResponse](<#type-errorresponse>)
- [type HealthyResponse](<#type-healthyresponse>)
- [type Resource](<#type-resource>)


## Constants

```go
const (
    // ErrGeneric signals a generic error.
    ErrGeneric int = iota

    // ErrJsonStringify signals that serialization to JSON failed.
    ErrJsonStringify int = iota

    // ErrJsonParse signals that the JSON parsing failed.
    ErrJsonParse int = iota

    // ErrRequest signals that the request failed.
    ErrRequest int = iota

    // ErrResponse signals that the response is erroneous.
    ErrResponse int = iota
)
```

```go
const (
    // StatusPending represents a pending (not yet confirmed) account.
    StatusPending = AccountStatusString("pending")

    // StatusConfirmed represents a confirmed account.
    StatusConfirmed = AccountStatusString("confirmed")

    // StatusClosed is an FPS only account status string and requires AccountAttr.StatusReason to be set.
    StatusClosed = AccountStatusString("closed")

    // StatusFailed is an SEPA and FPS Indirect (LHV) only account status string.
    StatusFailed = AccountStatusString("failed")

    // TypeAccount is the type for accounts.
    TypeAccount = "accounts"
)
```

Version hold the version of the client\.

```go
const Version = "0.0.1"
```

## Variables

```go
var (
    // DefaultEndPoint is the default endpoint to connect the client to.
    DefaultEndPoint = flag.String("f3.endpoint", "https://api.f3.tech/v1", "Set the default endpoint")

    // DefaultTimeout is the default timeout to be used for the http client.
    DefaultTimeout = time.Second * 5

    // DefaultOrganizationId is the default organization identifier to be used, when a new account is created. The variable
    // is initialized from the environment variable F3_CLIENT_ORG_ID
    DefaultOrganizationId string

    // DefaultIntegrationOrganizationId is the default organization identifier used for integration tests.
    DefaultIntegrationOrganizationId = "f8e803fe-6962-4811-94dc-e558610cbe78"

    // IntegrationTestAccountId is the id to be used for the integration test account, which is created and deleted.
    // Can be overridden using the environment variable F3_TEST_ACCOUNT_ID
    IntegrationTestAccountId = "f8e803fe-6962-4811-94dc-000000000000"

    // DefaultDialer is the default dialer that is being used when new Form 3 clients are created.
    DefaultDialer = &net.Dialer{}

    // DefaultTransport is the default transport configuration to be used when new Form 3 clients are created.
    DefaultTransport = &http.Transport{
        DialContext:     DefaultDialer.DialContext,
        MaxIdleConns:    10,
        IdleConnTimeout: 30 * time.Second,
    }
)
```

## type [Account](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/model-account.go#L38-L42>)

Account represents the account resource with attributes\.

```go
type Account struct {
    Resource
    // Attr are the attributes of the account.
    Attr *AccountAttr `json:"attributes,omitempty"`
}
```

### func [NewAccount](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/model-account.go#L96-L105>)

```go
func NewAccount(organizationId *string, country string, bankId string, bankIdCode string, accountHolder string, accountNumber string, accountCurrency string, customerId string) *Account
```

NewAccount is a small helper method to create a basic structure for a new account\. The created structure can be modified after creation or directly used to create a new account\. If the organization\-id is nil\, then the DefaultOrganizationId is used\. The customerId is optional and if given\, it is set\.

## type [AccountAttr](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/model-account.go#L45-L63>)

AccountAttr are the account specific attributes\.

```go
type AccountAttr struct {
    AlternativeNames        []string            `json:"alternative_names,omitempty"`
    Name                    []string            `json:"name,omitempty"`
    AccountClassification   string              `json:"account_classification,omitempty"`
    AccountNumber           string              `json:"account_number,omitempty"` // A unique account number will automatically be generated if not provided. If provided, the account number is not validated.
    BankId                  string              `json:"bank_id,omitempty"`
    BankIdCode              string              `json:"bank_id_code,omitempty"`
    BaseCurrency            string              `json:"base_currency,omitempty"`
    CustomerId              *string             `json:"customer_id,omitempty"`
    Bic                     string              `json:"bic,omitempty"`
    Country                 string              `json:"country,omitempty"`
    Iban                    string              `json:"iban,omitempty"` // Will be calculated from other fields if not supplied.
    SecondaryIdentification string              `json:"secondary_identification,omitempty"`
    Status                  AccountStatusString `json:"status,omitempty"`
    StatusReason            *string             `json:"status_reason,omitempty"`
    Switched                bool                `json:"switched,omitempty"`
    AccountMatchingOptOut   bool                `json:"account_matching_opt_out,omitempty"`
    JointAccount            bool                `json:"joint_account,omitempty"`
}
```

### func \(\*AccountAttr\) [WithStatusClosed](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/model-account.go#L80>)

```go
func (aa *AccountAttr) WithStatusClosed(reason string) *AccountAttr
```

WithStatusClosed set the status to StatusClosed\, requires reason\.

### func \(\*AccountAttr\) [WithStatusConfirmed](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/model-account.go#L73>)

```go
func (aa *AccountAttr) WithStatusConfirmed() *AccountAttr
```

WithStatusConfirmed set the status to StatusConfirmed\.

### func \(\*AccountAttr\) [WithStatusFailed](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/model-account.go#L87>)

```go
func (aa *AccountAttr) WithStatusFailed() *AccountAttr
```

WithStatusFailed set the status to StatusFailed\.

### func \(\*AccountAttr\) [WithStatusPending](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/model-account.go#L66>)

```go
func (aa *AccountAttr) WithStatusPending() *AccountAttr
```

WithStatusPending set the status to StatusPending\.

## type [AccountEnvelope](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/model-account.go#L33-L35>)

AccountEnvelope is an envelope for a single account\.

```go
type AccountEnvelope struct {
    Data *Account `json:"data"`
}
```

## type [AccountStatusString](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/model-account.go#L8>)

AccountStatusString is an alias for a string that represents the account status\.

```go
type AccountStatusString string
```

## type [AccountsEnvelope](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/model-account.go#L28-L30>)

AccountsEnvelope is an envelope for a list of accounts\.

```go
type AccountsEnvelope struct {
    Data []*Account `json:"data"`
}
```

## type [Client](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/client.go#L31-L36>)

Client is an abstraction above a http\.Client bound to a specific Form3 endpoint\.

```go
type Client struct {
    // contains filtered or unexported fields
}
```

### func [NewClient](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/client.go#L23>)

```go
func NewClient() *Client
```

NewClient creates a new Form3 client bound to the production endpoint and setup with defaults\.

### func \(\*Client\) [CreateAccount](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/client.go#L130>)

```go
func (c *Client) CreateAccount(account *Account) (*Account, Err)
```

CreateAccount creates the given account and returns the server response or an error\, when the account creation failed\.

### func \(\*Client\) [DeleteAccount](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/client.go#L174>)

```go
func (c *Client) DeleteAccount(accountId string, version uint64) Err
```

### func \(\*Client\) [FetchAccount](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/client.go#L153>)

```go
func (c *Client) FetchAccount(accountId string) (*Account, Err)
```

### func \(\*Client\) [HttpClient](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/client.go#L48>)

```go
func (c *Client) HttpClient() http.Client
```

HttpClient returns the underlying http client being used\. If the default created by NewClient is not sufficient\, modify this before using\.

### func \(\*Client\) [IsHealthy](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/client.go#L53>)

```go
func (c *Client) IsHealthy() bool
```

IsHealthy tests if the service is alive and responsive within the set request timeout\.

### func \(\*Client\) [WithEndPoint](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/client.go#L39>)

```go
func (c *Client) WithEndPoint(endpoint string) *Client
```

WithEndPoint rebinds the endpoint of the client\.

## type [Err](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/errors.go#L9-L20>)

Err is an interface to return errors\, which is compatible to the standard error interface\.

```go
type Err interface {
    // Unwrap returns the cause.
    Unwrap() error
    // Error returns the human-readable err message.
    Error() string
    // ErrorCode returns the machine-readable error code.
    ErrorCode() int
    // Request returns the HTTP request that is the reason for this error; if any.
    Request() *http.Request
    // Response returns the HTTP response that is the reason for this error; if any.
    Response() *http.Response
}
```

## type [ErrorResponse](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/response-error.go#L4-L6>)

ErrorResponse is the response the account API sends back\, when an error encountered\.

```go
type ErrorResponse struct {
    ErrorMessage string `json:"error_message"`
}
```

## type [HealthyResponse](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/response-healthy.go#L4-L7>)

HealthyResponse is returned by the health\-check request\.

```go
type HealthyResponse struct {
    // Status is the status returned by the service.
    Status *string `json:"status,omitempty"`
}
```

## type [Resource](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/model-resource.go#L6-L27>)

Resource is an abstract base structure with the shared attributes of all resources\.

```go
type Resource struct {
    // Id is the unique identifier of the resource; must be a UUID.
    Id  string `json:"id,omitempty"`

    // OrganisationId is the unique identifier of the organization that own the record; must be a UUID.
    OrganisationId string `json:"organisation_id,omitempty"`

    // Type is the type of the record and set by the account API.
    Type string `json:"type,omitempty"`

    // Version is a counter indicating how many times this resource has been modified. When you create a resource, it
    // is automatically set to 0. Whenever the content of the resource changes, the value of version is increased.
    // Used for concurrency control in Patch and Delete methods to avoid modifying an older version of the record that
    // has already been changed (err.g. by an internal process at Form3).
    Version *uint64 `json:"version,omitempty"` // Note: It needs to be a pointer, because we need to differ between missing and 0

    // CreatedOn is the time when the record was created, set server side.
    CreatedOn *time.Time `json:"created_on,omitempty"`

    // ModifiedOn is the time when the record was last modified, set server side.
    ModifiedOn *time.Time `json:"modified_on,omitempty"`
}
```

# f3

```go
import "command-line-arguments"
```

## Index

- [Constants](<#constants>)
- [Variables](<#variables>)
- [type Account](<#type-account>)
  - [func NewAccount(organizationId *string, country string, bankId string, bankIdCode string, accountHolder string, accountNumber string, accountCurrency string, customerId string) *Account](<#func-newaccount>)
- [type AccountAttr](<#type-accountattr>)
  - [func (aa *AccountAttr) WithStatusClosed(reason string) *AccountAttr](<#func-accountattr-withstatusclosed>)
  - [func (aa *AccountAttr) WithStatusConfirmed() *AccountAttr](<#func-accountattr-withstatusconfirmed>)
  - [func (aa *AccountAttr) WithStatusFailed() *AccountAttr](<#func-accountattr-withstatusfailed>)
  - [func (aa *AccountAttr) WithStatusPending() *AccountAttr](<#func-accountattr-withstatuspending>)
- [type AccountEnvelope](<#type-accountenvelope>)
- [type AccountStatusString](<#type-accountstatusstring>)
- [type AccountsEnvelope](<#type-accountsenvelope>)
- [type Client](<#type-client>)
  - [func NewClient() *Client](<#func-newclient>)
  - [func (c *Client) CreateAccount(account *Account) (*Account, Err)](<#func-client-createaccount>)
  - [func (c *Client) DeleteAccount(accountId string, version uint64) Err](<#func-client-deleteaccount>)
  - [func (c *Client) FetchAccount(accountId string) (*Account, Err)](<#func-client-fetchaccount>)
  - [func (c *Client) HttpClient() http.Client](<#func-client-httpclient>)
  - [func (c *Client) IsHealthy() bool](<#func-client-ishealthy>)
  - [func (c *Client) WithEndPoint(endpoint string) *Client](<#func-client-withendpoint>)
- [type Err](<#type-err>)
- [type ErrorResponse](<#type-errorresponse>)
- [type HealthyResponse](<#type-healthyresponse>)
- [type Resource](<#type-resource>)


## Constants

```go
const (
    // ErrGeneric signals a generic error.
    ErrGeneric int = iota

    // ErrJsonStringify signals that serialization to JSON failed.
    ErrJsonStringify int = iota

    // ErrJsonParse signals that the JSON parsing failed.
    ErrJsonParse int = iota

    // ErrRequest signals that the request failed.
    ErrRequest int = iota

    // ErrResponse signals that the response is erroneous.
    ErrResponse int = iota
)
```

```go
const (
    // StatusPending represents a pending (not yet confirmed) account.
    StatusPending = AccountStatusString("pending")

    // StatusConfirmed represents a confirmed account.
    StatusConfirmed = AccountStatusString("confirmed")

    // StatusClosed is an FPS only account status string and requires AccountAttr.StatusReason to be set.
    StatusClosed = AccountStatusString("closed")

    // StatusFailed is an SEPA and FPS Indirect (LHV) only account status string.
    StatusFailed = AccountStatusString("failed")

    // TypeAccount is the type for accounts.
    TypeAccount = "accounts"
)
```

Version hold the version of the client\.

```go
const Version = "0.0.1"
```

## Variables

```go
var (
    // DefaultEndPoint is the default endpoint to connect the client to.
    DefaultEndPoint = flag.String("f3.endpoint", "https://api.f3.tech/v1", "Set the default endpoint")

    // DefaultTimeout is the default timeout to be used for the http client.
    DefaultTimeout = time.Second * 5

    // DefaultOrganizationId is the default organization identifier to be used, when a new account is created. The variable
    // is initialized from the environment variable F3_CLIENT_ORG_ID
    DefaultOrganizationId string

    // DefaultIntegrationOrganizationId is the default organization identifier used for integration tests.
    DefaultIntegrationOrganizationId = "f8e803fe-6962-4811-94dc-e558610cbe78"

    // IntegrationTestAccountId is the id to be used for the integration test account, which is created and deleted.
    // Can be overridden using the environment variable F3_TEST_ACCOUNT_ID
    IntegrationTestAccountId = "f8e803fe-6962-4811-94dc-000000000000"

    // DefaultDialer is the default dialer that is being used when new Form 3 clients are created.
    DefaultDialer = &net.Dialer{}

    // DefaultTransport is the default transport configuration to be used when new Form 3 clients are created.
    DefaultTransport = &http.Transport{
        DialContext:     DefaultDialer.DialContext,
        MaxIdleConns:    10,
        IdleConnTimeout: 30 * time.Second,
    }
)
```

## type [Account](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/model-account.go#L38-L42>)

Account represents the account resource with attributes\.

```go
type Account struct {
    Resource
    // Attr are the attributes of the account.
    Attr *AccountAttr `json:"attributes,omitempty"`
}
```

### func [NewAccount](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/model-account.go#L96-L105>)

```go
func NewAccount(organizationId *string, country string, bankId string, bankIdCode string, accountHolder string, accountNumber string, accountCurrency string, customerId string) *Account
```

NewAccount is a small helper method to create a basic structure for a new account\. The created structure can be modified after creation or directly used to create a new account\. If the organization\-id is nil\, then the DefaultOrganizationId is used\. The customerId is optional and if given\, it is set\.

## type [AccountAttr](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/model-account.go#L45-L63>)

AccountAttr are the account specific attributes\.

```go
type AccountAttr struct {
    AlternativeNames        []string            `json:"alternative_names,omitempty"`
    Name                    []string            `json:"name,omitempty"`
    AccountClassification   string              `json:"account_classification,omitempty"`
    AccountNumber           string              `json:"account_number,omitempty"` // A unique account number will automatically be generated if not provided. If provided, the account number is not validated.
    BankId                  string              `json:"bank_id,omitempty"`
    BankIdCode              string              `json:"bank_id_code,omitempty"`
    BaseCurrency            string              `json:"base_currency,omitempty"`
    CustomerId              *string             `json:"customer_id,omitempty"`
    Bic                     string              `json:"bic,omitempty"`
    Country                 string              `json:"country,omitempty"`
    Iban                    string              `json:"iban,omitempty"` // Will be calculated from other fields if not supplied.
    SecondaryIdentification string              `json:"secondary_identification,omitempty"`
    Status                  AccountStatusString `json:"status,omitempty"`
    StatusReason            *string             `json:"status_reason,omitempty"`
    Switched                bool                `json:"switched,omitempty"`
    AccountMatchingOptOut   bool                `json:"account_matching_opt_out,omitempty"`
    JointAccount            bool                `json:"joint_account,omitempty"`
}
```

### func \(\*AccountAttr\) [WithStatusClosed](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/model-account.go#L80>)

```go
func (aa *AccountAttr) WithStatusClosed(reason string) *AccountAttr
```

WithStatusClosed set the status to StatusClosed\, requires reason\.

### func \(\*AccountAttr\) [WithStatusConfirmed](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/model-account.go#L73>)

```go
func (aa *AccountAttr) WithStatusConfirmed() *AccountAttr
```

WithStatusConfirmed set the status to StatusConfirmed\.

### func \(\*AccountAttr\) [WithStatusFailed](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/model-account.go#L87>)

```go
func (aa *AccountAttr) WithStatusFailed() *AccountAttr
```

WithStatusFailed set the status to StatusFailed\.

### func \(\*AccountAttr\) [WithStatusPending](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/model-account.go#L66>)

```go
func (aa *AccountAttr) WithStatusPending() *AccountAttr
```

WithStatusPending set the status to StatusPending\.

## type [AccountEnvelope](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/model-account.go#L33-L35>)

AccountEnvelope is an envelope for a single account\.

```go
type AccountEnvelope struct {
    Data *Account `json:"data"`
}
```

## type [AccountStatusString](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/model-account.go#L8>)

AccountStatusString is an alias for a string that represents the account status\.

```go
type AccountStatusString string
```

## type [AccountsEnvelope](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/model-account.go#L28-L30>)

AccountsEnvelope is an envelope for a list of accounts\.

```go
type AccountsEnvelope struct {
    Data []*Account `json:"data"`
}
```

## type [Client](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/client.go#L31-L36>)

Client is an abstraction above a http\.Client bound to a specific Form3 endpoint\.

```go
type Client struct {
    // contains filtered or unexported fields
}
```

### func [NewClient](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/client.go#L23>)

```go
func NewClient() *Client
```

NewClient creates a new Form3 client bound to the production endpoint and setup with defaults\.

### func \(\*Client\) [CreateAccount](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/client.go#L130>)

```go
func (c *Client) CreateAccount(account *Account) (*Account, Err)
```

CreateAccount creates the given account and returns the server response or an error\, when the account creation failed\.

### func \(\*Client\) [DeleteAccount](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/client.go#L174>)

```go
func (c *Client) DeleteAccount(accountId string, version uint64) Err
```

### func \(\*Client\) [FetchAccount](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/client.go#L153>)

```go
func (c *Client) FetchAccount(accountId string) (*Account, Err)
```

### func \(\*Client\) [HttpClient](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/client.go#L48>)

```go
func (c *Client) HttpClient() http.Client
```

HttpClient returns the underlying http client being used\. If the default created by NewClient is not sufficient\, modify this before using\.

### func \(\*Client\) [IsHealthy](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/client.go#L53>)

```go
func (c *Client) IsHealthy() bool
```

IsHealthy tests if the service is alive and responsive within the set request timeout\.

### func \(\*Client\) [WithEndPoint](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/client.go#L39>)

```go
func (c *Client) WithEndPoint(endpoint string) *Client
```

WithEndPoint rebinds the endpoint of the client\.

## type [Err](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/errors.go#L9-L20>)

Err is an interface to return errors\, which is compatible to the standard error interface\.

```go
type Err interface {
    // Unwrap returns the cause.
    Unwrap() error
    // Error returns the human-readable err message.
    Error() string
    // ErrorCode returns the machine-readable error code.
    ErrorCode() int
    // Request returns the HTTP request that is the reason for this error; if any.
    Request() *http.Request
    // Response returns the HTTP response that is the reason for this error; if any.
    Response() *http.Response
}
```

## type [ErrorResponse](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/response-error.go#L4-L6>)

ErrorResponse is the response the account API sends back\, when an error encountered\.

```go
type ErrorResponse struct {
    ErrorMessage string `json:"error_message"`
}
```

## type [HealthyResponse](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/response-healthy.go#L4-L7>)

HealthyResponse is returned by the health\-check request\.

```go
type HealthyResponse struct {
    // Status is the status returned by the service.
    Status *string `json:"status,omitempty"`
}
```

## type [Resource](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/model-resource.go#L6-L27>)

Resource is an abstract base structure with the shared attributes of all resources\.

```go
type Resource struct {
    // Id is the unique identifier of the resource; must be a UUID.
    Id  string `json:"id,omitempty"`

    // OrganisationId is the unique identifier of the organization that own the record; must be a UUID.
    OrganisationId string `json:"organisation_id,omitempty"`

    // Type is the type of the record and set by the account API.
    Type string `json:"type,omitempty"`

    // Version is a counter indicating how many times this resource has been modified. When you create a resource, it
    // is automatically set to 0. Whenever the content of the resource changes, the value of version is increased.
    // Used for concurrency control in Patch and Delete methods to avoid modifying an older version of the record that
    // has already been changed (err.g. by an internal process at Form3).
    Version *uint64 `json:"version,omitempty"` // Note: It needs to be a pointer, because we need to differ between missing and 0

    // CreatedOn is the time when the record was created, set server side.
    CreatedOn *time.Time `json:"created_on,omitempty"`

    // ModifiedOn is the time when the record was last modified, set server side.
    ModifiedOn *time.Time `json:"modified_on,omitempty"`
}
```

# f3

```go
import "command-line-arguments"
```

## Index

- [Constants](<#constants>)
- [Variables](<#variables>)
- [type Account](<#type-account>)
  - [func NewAccount(organizationId *string, country string, bankId string, bankIdCode string, accountHolder string, accountNumber string, accountCurrency string, customerId string) *Account](<#func-newaccount>)
- [type AccountAttr](<#type-accountattr>)
  - [func (aa *AccountAttr) WithStatusClosed(reason string) *AccountAttr](<#func-accountattr-withstatusclosed>)
  - [func (aa *AccountAttr) WithStatusConfirmed() *AccountAttr](<#func-accountattr-withstatusconfirmed>)
  - [func (aa *AccountAttr) WithStatusFailed() *AccountAttr](<#func-accountattr-withstatusfailed>)
  - [func (aa *AccountAttr) WithStatusPending() *AccountAttr](<#func-accountattr-withstatuspending>)
- [type AccountEnvelope](<#type-accountenvelope>)
- [type AccountStatusString](<#type-accountstatusstring>)
- [type AccountsEnvelope](<#type-accountsenvelope>)
- [type Client](<#type-client>)
  - [func NewClient() *Client](<#func-newclient>)
  - [func (c *Client) CreateAccount(account *Account) (*Account, Err)](<#func-client-createaccount>)
  - [func (c *Client) DeleteAccount(accountId string, version uint64) Err](<#func-client-deleteaccount>)
  - [func (c *Client) FetchAccount(accountId string) (*Account, Err)](<#func-client-fetchaccount>)
  - [func (c *Client) HttpClient() http.Client](<#func-client-httpclient>)
  - [func (c *Client) IsHealthy() bool](<#func-client-ishealthy>)
  - [func (c *Client) WithEndPoint(endpoint string) *Client](<#func-client-withendpoint>)
- [type Err](<#type-err>)
- [type ErrorResponse](<#type-errorresponse>)
- [type HealthyResponse](<#type-healthyresponse>)
- [type Resource](<#type-resource>)


## Constants

```go
const (
    // ErrGeneric signals a generic error.
    ErrGeneric int = iota

    // ErrJsonStringify signals that serialization to JSON failed.
    ErrJsonStringify int = iota

    // ErrJsonParse signals that the JSON parsing failed.
    ErrJsonParse int = iota

    // ErrRequest signals that the request failed.
    ErrRequest int = iota

    // ErrResponse signals that the response is erroneous.
    ErrResponse int = iota
)
```

```go
const (
    // StatusPending represents a pending (not yet confirmed) account.
    StatusPending = AccountStatusString("pending")

    // StatusConfirmed represents a confirmed account.
    StatusConfirmed = AccountStatusString("confirmed")

    // StatusClosed is an FPS only account status string and requires AccountAttr.StatusReason to be set.
    StatusClosed = AccountStatusString("closed")

    // StatusFailed is an SEPA and FPS Indirect (LHV) only account status string.
    StatusFailed = AccountStatusString("failed")

    // TypeAccount is the type for accounts.
    TypeAccount = "accounts"
)
```

Version hold the version of the client\.

```go
const Version = "0.0.1"
```

## Variables

```go
var (
    // DefaultEndPoint is the default endpoint to connect the client to.
    DefaultEndPoint = flag.String("f3.endpoint", "https://api.f3.tech/v1", "Set the default endpoint")

    // DefaultTimeout is the default timeout to be used for the http client.
    DefaultTimeout = time.Second * 5

    // DefaultOrganizationId is the default organization identifier to be used, when a new account is created. The variable
    // is initialized from the environment variable F3_CLIENT_ORG_ID
    DefaultOrganizationId string

    // DefaultIntegrationOrganizationId is the default organization identifier used for integration tests.
    DefaultIntegrationOrganizationId = "f8e803fe-6962-4811-94dc-e558610cbe78"

    // IntegrationTestAccountId is the id to be used for the integration test account, which is created and deleted.
    // Can be overridden using the environment variable F3_TEST_ACCOUNT_ID
    IntegrationTestAccountId = "f8e803fe-6962-4811-94dc-000000000000"

    // DefaultDialer is the default dialer that is being used when new Form 3 clients are created.
    DefaultDialer = &net.Dialer{}

    // DefaultTransport is the default transport configuration to be used when new Form 3 clients are created.
    DefaultTransport = &http.Transport{
        DialContext:     DefaultDialer.DialContext,
        MaxIdleConns:    10,
        IdleConnTimeout: 30 * time.Second,
    }
)
```

## type [Account](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/model-account.go#L38-L42>)

Account represents the account resource with attributes\.

```go
type Account struct {
    Resource
    // Attr are the attributes of the account.
    Attr *AccountAttr `json:"attributes,omitempty"`
}
```

### func [NewAccount](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/model-account.go#L96-L105>)

```go
func NewAccount(organizationId *string, country string, bankId string, bankIdCode string, accountHolder string, accountNumber string, accountCurrency string, customerId string) *Account
```

NewAccount is a small helper method to create a basic structure for a new account\. The created structure can be modified after creation or directly used to create a new account\. If the organization\-id is nil\, then the DefaultOrganizationId is used\. The customerId is optional and if given\, it is set\.

## type [AccountAttr](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/model-account.go#L45-L63>)

AccountAttr are the account specific attributes\.

```go
type AccountAttr struct {
    AlternativeNames        []string            `json:"alternative_names,omitempty"`
    Name                    []string            `json:"name,omitempty"`
    AccountClassification   string              `json:"account_classification,omitempty"`
    AccountNumber           string              `json:"account_number,omitempty"` // A unique account number will automatically be generated if not provided. If provided, the account number is not validated.
    BankId                  string              `json:"bank_id,omitempty"`
    BankIdCode              string              `json:"bank_id_code,omitempty"`
    BaseCurrency            string              `json:"base_currency,omitempty"`
    CustomerId              *string             `json:"customer_id,omitempty"`
    Bic                     string              `json:"bic,omitempty"`
    Country                 string              `json:"country,omitempty"`
    Iban                    string              `json:"iban,omitempty"` // Will be calculated from other fields if not supplied.
    SecondaryIdentification string              `json:"secondary_identification,omitempty"`
    Status                  AccountStatusString `json:"status,omitempty"`
    StatusReason            *string             `json:"status_reason,omitempty"`
    Switched                bool                `json:"switched,omitempty"`
    AccountMatchingOptOut   bool                `json:"account_matching_opt_out,omitempty"`
    JointAccount            bool                `json:"joint_account,omitempty"`
}
```

### func \(\*AccountAttr\) [WithStatusClosed](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/model-account.go#L80>)

```go
func (aa *AccountAttr) WithStatusClosed(reason string) *AccountAttr
```

WithStatusClosed set the status to StatusClosed\, requires reason\.

### func \(\*AccountAttr\) [WithStatusConfirmed](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/model-account.go#L73>)

```go
func (aa *AccountAttr) WithStatusConfirmed() *AccountAttr
```

WithStatusConfirmed set the status to StatusConfirmed\.

### func \(\*AccountAttr\) [WithStatusFailed](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/model-account.go#L87>)

```go
func (aa *AccountAttr) WithStatusFailed() *AccountAttr
```

WithStatusFailed set the status to StatusFailed\.

### func \(\*AccountAttr\) [WithStatusPending](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/model-account.go#L66>)

```go
func (aa *AccountAttr) WithStatusPending() *AccountAttr
```

WithStatusPending set the status to StatusPending\.

## type [AccountEnvelope](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/model-account.go#L33-L35>)

AccountEnvelope is an envelope for a single account\.

```go
type AccountEnvelope struct {
    Data *Account `json:"data"`
}
```

## type [AccountStatusString](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/model-account.go#L8>)

AccountStatusString is an alias for a string that represents the account status\.

```go
type AccountStatusString string
```

## type [AccountsEnvelope](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/model-account.go#L28-L30>)

AccountsEnvelope is an envelope for a list of accounts\.

```go
type AccountsEnvelope struct {
    Data []*Account `json:"data"`
}
```

## type [Client](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/client.go#L31-L36>)

Client is an abstraction above a http\.Client bound to a specific Form3 endpoint\.

```go
type Client struct {
    // contains filtered or unexported fields
}
```

### func [NewClient](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/client.go#L23>)

```go
func NewClient() *Client
```

NewClient creates a new Form3 client bound to the production endpoint and setup with defaults\.

### func \(\*Client\) [CreateAccount](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/client.go#L130>)

```go
func (c *Client) CreateAccount(account *Account) (*Account, Err)
```

CreateAccount creates the given account and returns the server response or an error\, when the account creation failed\.

### func \(\*Client\) [DeleteAccount](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/client.go#L174>)

```go
func (c *Client) DeleteAccount(accountId string, version uint64) Err
```

### func \(\*Client\) [FetchAccount](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/client.go#L153>)

```go
func (c *Client) FetchAccount(accountId string) (*Account, Err)
```

### func \(\*Client\) [HttpClient](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/client.go#L48>)

```go
func (c *Client) HttpClient() http.Client
```

HttpClient returns the underlying http client being used\. If the default created by NewClient is not sufficient\, modify this before using\.

### func \(\*Client\) [IsHealthy](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/client.go#L53>)

```go
func (c *Client) IsHealthy() bool
```

IsHealthy tests if the service is alive and responsive within the set request timeout\.

### func \(\*Client\) [WithEndPoint](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/client.go#L39>)

```go
func (c *Client) WithEndPoint(endpoint string) *Client
```

WithEndPoint rebinds the endpoint of the client\.

## type [Err](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/errors.go#L9-L20>)

Err is an interface to return errors\, which is compatible to the standard error interface\.

```go
type Err interface {
    // Unwrap returns the cause.
    Unwrap() error
    // Error returns the human-readable err message.
    Error() string
    // ErrorCode returns the machine-readable error code.
    ErrorCode() int
    // Request returns the HTTP request that is the reason for this error; if any.
    Request() *http.Request
    // Response returns the HTTP response that is the reason for this error; if any.
    Response() *http.Response
}
```

## type [ErrorResponse](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/response-error.go#L4-L6>)

ErrorResponse is the response the account API sends back\, when an error encountered\.

```go
type ErrorResponse struct {
    ErrorMessage string `json:"error_message"`
}
```

## type [HealthyResponse](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/response-healthy.go#L4-L7>)

HealthyResponse is returned by the health\-check request\.

```go
type HealthyResponse struct {
    // Status is the status returned by the service.
    Status *string `json:"status,omitempty"`
}
```

## type [Resource](<https://github.com/form3tech-oss/interview-accountapi/blob/master/pkg/f3/model-resource.go#L6-L27>)

Resource is an abstract base structure with the shared attributes of all resources\.

```go
type Resource struct {
    // Id is the unique identifier of the resource; must be a UUID.
    Id  string `json:"id,omitempty"`

    // OrganisationId is the unique identifier of the organization that own the record; must be a UUID.
    OrganisationId string `json:"organisation_id,omitempty"`

    // Type is the type of the record and set by the account API.
    Type string `json:"type,omitempty"`

    // Version is a counter indicating how many times this resource has been modified. When you create a resource, it
    // is automatically set to 0. Whenever the content of the resource changes, the value of version is increased.
    // Used for concurrency control in Patch and Delete methods to avoid modifying an older version of the record that
    // has already been changed (err.g. by an internal process at Form3).
    Version *uint64 `json:"version,omitempty"` // Note: It needs to be a pointer, because we need to differ between missing and 0

    // CreatedOn is the time when the record was created, set server side.
    CreatedOn *time.Time `json:"created_on,omitempty"`

    // ModifiedOn is the time when the record was last modified, set server side.
    ModifiedOn *time.Time `json:"modified_on,omitempty"`
}
```



Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)
