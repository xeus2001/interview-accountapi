<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# f3

```go
import "github.com/xeus2001/interview-accountapi/src/f3"
```

## Index

- [Constants](<#constants>)
- [Variables](<#variables>)
- [func NewAccount(organizationId *uuid.UUID, countryCode iso.CountryCode, bankId string, accountHolderName []string, accountNumber string, customerId string) (*Account, Err)](<#func-newaccount>)
- [func NewClient(host string, port int32, timeout time.Duration) (*Client, Err)](<#func-newclient>)
- [type Account](<#type-account>)
- [type AccountAttr](<#type-accountattr>)
  - [func (aa *AccountAttr) SetStatus(status AccountStatus, reason string) Err](<#func-accountattr-setstatus>)
- [type AccountStatus](<#type-accountstatus>)
- [type Accounts](<#type-accounts>)
- [type BankIdCode](<#type-bankidcode>)
- [type BankRestrictions](<#type-bankrestrictions>)
  - [func BankRestrictionsByCountry(country iso.CountryCode) BankRestrictions](<#func-bankrestrictionsbycountry>)
- [type Client](<#type-client>)
  - [func (c *Client) CreateAccount(account *Account) (*Account, Err)](<#func-client-createaccount>)
  - [func (c *Client) DeleteAccount(accountId string)](<#func-client-deleteaccount>)
  - [func (c *Client) FetchAccount(accountId string)](<#func-client-fetchaccount>)
  - [func (c *Client) IsHealthy() bool](<#func-client-ishealthy>)
- [type Err](<#type-err>)
  - [func NewId() (*uuid.UUID, Err)](<#func-newid>)
- [type ErrorResponse](<#type-errorresponse>)
- [type Resource](<#type-resource>)


## Constants

```go
const (
    ErrUnknown             int32 = iota // An error that has no error code happened.
    ErrEmptyHostName       int32 = iota // Returned when a new client is created with an empty host name.
    ErrIllegalPort         int32 = iota // Returned when a new client is given with an invalid port.
    ErrInvalidUuid         int32 = iota // When an identifier must be a UUID and is not valid UUID string.
    ErrInvalidStatus       int32 = iota // When an invalid status is given
    ErrMissingStatusReason int32 = iota // When a status with mandatory reason is given without reason.
    ErrCountryUnknown      int32 = iota // When a new account could not be initialized for the provided country.
    ErrBankIdMissing       int32 = iota // When a bank-id is required, but none was given.
    ErrBankIdTooShort      int32 = iota // When a bank-id is too short.
    ErrBankIdTooLong       int32 = iota // When a bank-id is too long.
    ErrAccountNil          int32 = iota // When the account structure is nil.
    ErrJsonStringify       int32 = iota // When serialization to JSON fails.
    ErrJsonParse           int32 = iota // When parsing JSON fails.
    ErrRequest             int32 = iota // When the request itself failed.
    ErrResponse            int32 = iota // When the response is not of the expected form.
)
```

```go
const (
    StatusPending   = AccountStatus("pending")   // All services
    StatusConfirmed = AccountStatus("confirmed") // All services
    StatusClosed    = AccountStatus("closed")    // FPS only, requires status_reason
    StatusFailed    = AccountStatus("failed")    // SEPA & FPS Indirect (LHV) only
)
```

## Variables

The default organization identifier to be used\, when a new account is created\.

```go
var DefaultOrganizationId *uuid.UUID = nil
```

## func [NewAccount](<https://github.com/form3tech-oss/interview-accountapi/blob/master/src/f3/client.go#L54-L61>)

```go
func NewAccount(organizationId *uuid.UUID, countryCode iso.CountryCode, bankId string, accountHolderName []string, accountNumber string, customerId string) (*Account, Err)
```

Create a new account and fills it with default values\. The created structure can be modified or directly used to create a new account\. The country is required and dependent on the country the bank\-id may be required too\. If the provided country is not eligible for default values and error is returned\. In this case the account structure must be created manually\.

## func [NewClient](<https://github.com/form3tech-oss/interview-accountapi/blob/master/src/f3/client.go#L120>)

```go
func NewClient(host string, port int32, timeout time.Duration) (*Client, Err)
```

Create a new Form3 client for the given host and port using the given request timeout\.

## type [Account](<https://github.com/form3tech-oss/interview-accountapi/blob/master/src/f3/models.go#L52-L55>)

The account record\.

```go
type Account struct {
    Resource
    Attr *AccountAttr `json:"attributes,omitempty"`
}
```

## type [AccountAttr](<https://github.com/form3tech-oss/interview-accountapi/blob/master/src/f3/models.go#L58-L76>)

The account attributes\.

```go
type AccountAttr struct {
    AccountClassification   *string           `json:"account_classification,omitempty"`
    AccountMatchingOptOut   *bool             `json:"account_matching_opt_out,omitempty"`
    AccountNumber           string            `json:"account_number,omitempty"` // A unique account number will automatically be generated if not provided. If provided, the account number is not validated.
    AlternativeNames        []string          `json:"alternative_names,omitempty"`
    BankID                  string            `json:"bank_id,omitempty"`
    BankIDCode              BankIdCode        `json:"bank_id_code,omitempty"`
    BaseCurrency            *iso.CurrencyCode `json:"base_currency,omitempty"`
    CustomerId              string            `json:"customer_id,omitempty"`
    Bic                     string            `json:"bic,omitempty"`
    Country                 iso.CountryCode   `json:"country,omitempty"`
    Iban                    string            `json:"iban,omitempty"` // Will be calculated from other fields if not supplied.
    JointAccount            *bool             `json:"joint_account,omitempty"`
    Name                    []string          `json:"name,omitempty"`
    SecondaryIdentification string            `json:"secondary_identification,omitempty"`
    Status                  *AccountStatus    `json:"status,omitempty"`
    StatusReason            *string           `json:"status_reason,omitempty"`
    Switched                *bool             `json:"switched,omitempty"`
}
```

### func \(\*AccountAttr\) [SetStatus](<https://github.com/form3tech-oss/interview-accountapi/blob/master/src/f3/models.go#L80>)

```go
func (aa *AccountAttr) SetStatus(status AccountStatus, reason string) Err
```

Set the status and optionally the status reason\. The reason is only taking into account for the status failed and in that case it is mandatory\.

## type [AccountStatus](<https://github.com/form3tech-oss/interview-accountapi/blob/master/src/f3/models.go#L37>)

The account status\.

```go
type AccountStatus string
```

## type [Accounts](<https://github.com/form3tech-oss/interview-accountapi/blob/master/src/f3/models.go#L47-L49>)

The account list either being sent or received\.

```go
type Accounts struct {
    Data []*Account `json:"data"`
}
```

## type [BankIdCode](<https://github.com/form3tech-oss/interview-accountapi/blob/master/src/f3/models.go#L11>)

The bank ID code\.

```go
type BankIdCode string
```

## type [BankRestrictions](<https://github.com/form3tech-oss/interview-accountapi/blob/master/src/f3/models.go#L94-L98>)

Information about restrictions for banks\.

```go
type BankRestrictions interface {
    CountryCode() iso.CountryCode
    BankIdCode() *BankIdCode
    ValidateBankId(id string) Err
}
```

### func [BankRestrictionsByCountry](<https://github.com/form3tech-oss/interview-accountapi/blob/master/src/f3/models.go#L179>)

```go
func BankRestrictionsByCountry(country iso.CountryCode) BankRestrictions
```

Returns bank restrictions for the given country or nil\, if no restrictions are known\. Be aware that this does not mean that there are no restrictions\.

## type [Client](<https://github.com/form3tech-oss/interview-accountapi/blob/master/src/f3/client.go#L135-L142>)

Client is a structure to store options needed to access a specific Form3 service\. This object is stateless\.

```go
type Client struct {
    // contains filtered or unexported fields
}
```

### func \(\*Client\) [CreateAccount](<https://github.com/form3tech-oss/interview-accountapi/blob/master/src/f3/client.go#L176>)

```go
func (c *Client) CreateAccount(account *Account) (*Account, Err)
```

### func \(\*Client\) [DeleteAccount](<https://github.com/form3tech-oss/interview-accountapi/blob/master/src/f3/client.go#L227>)

```go
func (c *Client) DeleteAccount(accountId string)
```

### func \(\*Client\) [FetchAccount](<https://github.com/form3tech-oss/interview-accountapi/blob/master/src/f3/client.go#L223>)

```go
func (c *Client) FetchAccount(accountId string)
```

### func \(\*Client\) [IsHealthy](<https://github.com/form3tech-oss/interview-accountapi/blob/master/src/f3/client.go#L145>)

```go
func (c *Client) IsHealthy() bool
```

Test if the service is alive and responsive within the set request timeout\.

## type [Err](<https://github.com/form3tech-oss/interview-accountapi/blob/master/src/f3/errors.go#L14-L17>)

Err is an interface to return errors\, which is compatible to the standard error interface\, but additionally supports an error code\. I do not get why errors are returned as strings\, comparing a string is much more expensive than comparing an integer \(it needs to be done byte by byte\)\. Apart from that the error message may contain volatile information\, for example like "The file '/tmp/test\.foo' was not found"\. So we use this to have the option to compare the error code to find out the error class\.

```go
type Err interface {
    Error() string
    ErrorCode() int32
}
```

### func [NewId](<https://github.com/form3tech-oss/interview-accountapi/blob/master/src/f3/client.go#L42>)

```go
func NewId() (*uuid.UUID, Err)
```

Creates a new random identifier\. THis can be used for accounts\, organizations and others unique identifiers\.

## type [ErrorResponse](<https://github.com/form3tech-oss/interview-accountapi/blob/master/src/f3/models.go#L14-L16>)

The error message returned by the service\.

```go
type ErrorResponse struct {
    ErrorMessage string `json:"error_message"`
}
```

## type [Resource](<https://github.com/form3tech-oss/interview-accountapi/blob/master/src/f3/models.go#L27-L34>)

The shared attributes of all resources\. The ID is the unique identifier of the resource; must be a UUID\. The OrganisationID is the unique identifier of the organization that own the record; must be a UUID\. The Type is the type of the record and set by the account API\. The Version is a counter indicating how many times this resource has been modified\. When you create a resource\, it is automatically set to 0\. Whenever the content of the resource changes\, the value of version is increased\. Used for concurrency control in Patch and Delete methods to avoid modifying an older version of the record that has already been changed \(e\.g\. by an internal process at Form3\)\. See: https://en.wikipedia.org/wiki/Universally_unique_identifier#Version_4_(random)

```go
type Resource struct {
    ID             string     `json:"id,omitempty"`
    OrganisationID string     `json:"organisation_id,omitempty"`
    Type           string     `json:"type,omitempty"`
    Version        *int64     `json:"version,omitempty"`
    CreatedOn      *time.Time `json:"created_on,omitempty"`
    ModifiedOn     *time.Time `json:"modified_on,omitempty"`
}
```



Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)
